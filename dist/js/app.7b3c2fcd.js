(function(){var e={6700:function(e,t,a){var i={"./af":3906,"./af.js":3906,"./ar":902,"./ar-dz":3853,"./ar-dz.js":3853,"./ar-kw":299,"./ar-kw.js":299,"./ar-ly":6825,"./ar-ly.js":6825,"./ar-ma":6379,"./ar-ma.js":6379,"./ar-sa":7700,"./ar-sa.js":7700,"./ar-tn":2059,"./ar-tn.js":2059,"./ar.js":902,"./az":6043,"./az.js":6043,"./be":7936,"./be.js":7936,"./bg":4078,"./bg.js":4078,"./bm":4014,"./bm.js":4014,"./bn":9554,"./bn-bd":7114,"./bn-bd.js":7114,"./bn.js":9554,"./bo":6529,"./bo.js":6529,"./br":5437,"./br.js":5437,"./bs":9647,"./bs.js":9647,"./ca":9951,"./ca.js":9951,"./cs":6113,"./cs.js":6113,"./cv":7965,"./cv.js":7965,"./cy":5858,"./cy.js":5858,"./da":3515,"./da.js":3515,"./de":2831,"./de-at":6263,"./de-at.js":6263,"./de-ch":1127,"./de-ch.js":1127,"./de.js":2831,"./dv":4510,"./dv.js":4510,"./el":8616,"./el.js":8616,"./en-au":4595,"./en-au.js":4595,"./en-ca":3545,"./en-ca.js":3545,"./en-gb":9609,"./en-gb.js":9609,"./en-ie":3727,"./en-ie.js":3727,"./en-il":3302,"./en-il.js":3302,"./en-in":6305,"./en-in.js":6305,"./en-nz":9128,"./en-nz.js":9128,"./en-sg":4569,"./en-sg.js":4569,"./eo":650,"./eo.js":650,"./es":6358,"./es-do":4214,"./es-do.js":4214,"./es-mx":8639,"./es-mx.js":8639,"./es-us":232,"./es-us.js":232,"./es.js":6358,"./et":7279,"./et.js":7279,"./eu":5515,"./eu.js":5515,"./fa":7981,"./fa.js":7981,"./fi":7090,"./fi.js":7090,"./fil":9208,"./fil.js":9208,"./fo":2799,"./fo.js":2799,"./fr":3463,"./fr-ca":2213,"./fr-ca.js":2213,"./fr-ch":2848,"./fr-ch.js":2848,"./fr.js":3463,"./fy":1468,"./fy.js":1468,"./ga":8163,"./ga.js":8163,"./gd":2898,"./gd.js":2898,"./gl":6312,"./gl.js":6312,"./gom-deva":682,"./gom-deva.js":682,"./gom-latn":9178,"./gom-latn.js":9178,"./gu":5009,"./gu.js":5009,"./he":2795,"./he.js":2795,"./hi":7009,"./hi.js":7009,"./hr":6506,"./hr.js":6506,"./hu":9565,"./hu.js":9565,"./hy-am":3864,"./hy-am.js":3864,"./id":5626,"./id.js":5626,"./is":6649,"./is.js":6649,"./it":151,"./it-ch":5348,"./it-ch.js":5348,"./it.js":151,"./ja":9830,"./ja.js":9830,"./jv":3751,"./jv.js":3751,"./ka":3365,"./ka.js":3365,"./kk":5980,"./kk.js":5980,"./km":9571,"./km.js":9571,"./kn":5880,"./kn.js":5880,"./ko":6809,"./ko.js":6809,"./ku":6773,"./ku.js":6773,"./ky":5505,"./ky.js":5505,"./lb":553,"./lb.js":553,"./lo":1237,"./lo.js":1237,"./lt":1563,"./lt.js":1563,"./lv":1057,"./lv.js":1057,"./me":6495,"./me.js":6495,"./mi":3096,"./mi.js":3096,"./mk":3874,"./mk.js":3874,"./ml":6055,"./ml.js":6055,"./mn":7747,"./mn.js":7747,"./mr":7113,"./mr.js":7113,"./ms":8687,"./ms-my":7948,"./ms-my.js":7948,"./ms.js":8687,"./mt":4532,"./mt.js":4532,"./my":4655,"./my.js":4655,"./nb":6961,"./nb.js":6961,"./ne":2512,"./ne.js":2512,"./nl":8448,"./nl-be":2936,"./nl-be.js":2936,"./nl.js":8448,"./nn":9031,"./nn.js":9031,"./oc-lnc":5174,"./oc-lnc.js":5174,"./pa-in":118,"./pa-in.js":118,"./pl":3448,"./pl.js":3448,"./pt":3518,"./pt-br":2447,"./pt-br.js":2447,"./pt.js":3518,"./ro":817,"./ro.js":817,"./ru":262,"./ru.js":262,"./sd":8990,"./sd.js":8990,"./se":3842,"./se.js":3842,"./si":7711,"./si.js":7711,"./sk":756,"./sk.js":756,"./sl":3772,"./sl.js":3772,"./sq":6187,"./sq.js":6187,"./sr":732,"./sr-cyrl":5713,"./sr-cyrl.js":5713,"./sr.js":732,"./ss":9455,"./ss.js":9455,"./sv":9770,"./sv.js":9770,"./sw":959,"./sw.js":959,"./ta":6459,"./ta.js":6459,"./te":5302,"./te.js":5302,"./tet":7975,"./tet.js":7975,"./tg":1294,"./tg.js":1294,"./th":2385,"./th.js":2385,"./tk":4613,"./tk.js":4613,"./tl-ph":8668,"./tl-ph.js":8668,"./tlh":8190,"./tlh.js":8190,"./tr":4506,"./tr.js":4506,"./tzl":3440,"./tzl.js":3440,"./tzm":9852,"./tzm-latn":2350,"./tzm-latn.js":2350,"./tzm.js":9852,"./ug-cn":730,"./ug-cn.js":730,"./uk":99,"./uk.js":99,"./ur":2100,"./ur.js":2100,"./uz":6002,"./uz-latn":6322,"./uz-latn.js":6322,"./uz.js":6002,"./vi":4207,"./vi.js":4207,"./x-pseudo":4674,"./x-pseudo.js":4674,"./yo":570,"./yo.js":570,"./zh-cn":3644,"./zh-cn.js":3644,"./zh-hk":2591,"./zh-hk.js":2591,"./zh-mo":9503,"./zh-mo.js":9503,"./zh-tw":8080,"./zh-tw.js":8080};function o(e){var t=s(e);return a(t)}function s(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}o.keys=function(){return Object.keys(i)},o.resolve=s,e.exports=o,o.id=6700},1691:function(e,t,a){"use strict";var i=a(9242),o=a(2483),s=a(7139),n={setCompanies(e,t){e.companies=t},setCompany(e,t){e.company=t},setToken(e,t){e.token=t.token,e.refreshToken=t.refreshToken}};a(7658);const r=10,l="https://timesheet-backend.azurewebsites.net/api/",d=function(){localStorage.removeItem("comid"),localStorage.removeItem("depid"),localStorage.removeItem("empid"),localStorage.removeItem("comidwt"),localStorage.removeItem("depidwt"),localStorage.removeItem("empidwt")},m=function(e){return new Promise((function(t,a){setTimeout((function(){a(new Error(`Server request took too long! Timeout after ${e} second`))}),1e3*e)}))};var c={async loadCompanies({commit:e,dispatch:t,rootGetters:a}){await t("auth/checkTokens",null,{root:!0});const i=await fetch(`${l}company`,{method:"GET",headers:{Authorization:`Bearer ${a["auth/token"].token}`}}),o=await Promise.race([i,m(r)]),s=await o.json();if(!o.ok){const e=new Error(s||"Failed to load companies!");throw e}const n=[];for(const r in s){const e={ID:s[r].id,Name:s[r].name,Address:s[r].address,City:s[r].city,Country:s[r].country,Email:s[r].email,CompanyManagerId:s[r].companyManagerId,StartTime:s[r].startTime,EndTime:s[r].endTime};n.push(e)}e("setCompanies",n)},async loadCompany({commit:e,dispatch:t,rootGetters:a},i){await t("auth/checkTokens",null,{root:!0});const o=await fetch(`${l}company/${i.id}`,{method:"GET",headers:{Authorization:`Bearer ${a["auth/token"].token}`}}),s=await Promise.race([o,m(r)]),n=await s.json();if(!s.ok){const e=new Error(n||"Failed to load company data!");throw e}const d={ID:n.id,Name:n.name,Address:n.address,City:n.city,Country:n.country,Email:n.email,CompanyManagerId:n.companyManagerId,StartTime:n.startTime,EndTime:n.endTime};e("setCompany",d)},async addCompany({dispatch:e,rootGetters:t},a){await e("auth/checkTokens",null,{root:!0});const i={Name:a.comName,Address:a.comAddress,City:a.comCity,Country:a.comCountry,Email:a.comEmail,StartTime:a.comStartTime,EndTime:a.comEndTime},o=await fetch(`${l}company`,{method:"POST",headers:{Authorization:`Bearer ${t["auth/token"].token}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(i)}),s=await Promise.race([o,m(r)]),n=await s.json();if(!s.ok){const e=new Error(n||"Failed to add company!");throw e}},async editCompany({dispatch:e,rootGetters:t},a){await e("auth/checkTokens",null,{root:!0});const i={ID:a.comId,Name:a.comName,Address:a.comAddress,City:a.comCity,Country:a.comCountry,Email:a.comEmail,CompanyManagerId:localStorage.getItem("userId"),StartTime:a.comStartTime,EndTime:a.comEndTime},o=await fetch(`${l}company`,{method:"PUT",headers:{Authorization:`Bearer ${t["auth/token"].token}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(i)}),s=await Promise.race([o,m(r)]),n=await s.json();if(!s.ok){const e=new Error(n||"Failed to edit company!");throw e}},async deleteCompany({dispatch:e,rootGetters:t},a){await e("auth/checkTokens",null,{root:!0});const i=await fetch(`${l}company/${a.id}?targetDepartmentId=${a.targetDepartmentId}&&deleteEmployees=${a.deleteEmployees}`,{method:"DELETE",headers:{Authorization:`Bearer ${t["auth/token"].token}`,Accept:"application/json","Content-Type":"application/json"}}),o=await Promise.race([i,m(r)]),s=await o.json();if(!o.ok){const e=new Error(s||"Failed to delete company!");throw e}}},u={companies(e){return e.companies},hasCompanies(e){return!!e.companies&&e.companies.length>0},company(e){return e.company},hasCompany(e){return!!e.company}},p={namespaced:!0,state(){return{companies:[],company:null}},mutations:n,getters:u,actions:c},h={setDepartments(e,t){e.departments=t},setDepartment(e,t){e.department=t}},y={async loadDepartments({commit:e,dispatch:t,rootGetters:a},i){await t("auth/checkTokens",null,{root:!0});const o=await fetch(`${l}department/${i.comid}`,{method:"GET",headers:{Authorization:`Bearer ${a["auth/token"].token}`}}),s=await Promise.race([o,m(r)]),n=await s.json();if(!s.ok){const e=new Error(n||"Failed to load departments!");throw e}const d=[];for(const r in n){const e={ID:n[r].id,Name:n[r].name};d.push(e)}e("setDepartments",d)},async loadDepartment({commit:e,dispatch:t,rootGetters:a},i){await t("auth/checkTokens",null,{root:!0});const o=await fetch(`${l}department/${i.comid}/${i.depid}`,{method:"GET",headers:{Authorization:`Bearer ${a["auth/token"].token}`}}),s=await Promise.race([o,m(r)]),n=await s.json();if(!s.ok){const e=new Error(n||"Failed to load department data!");throw e}const d={ID:n.id,Name:n.name};e("setDepartment",d)},async addDepartment({dispatch:e,rootGetters:t},a){const i={Name:a.depName,CompanyID:a.comId};await e("auth/checkTokens",null,{root:!0});const o=await fetch(`${l}department`,{method:"POST",headers:{Authorization:`Bearer ${t["auth/token"].token}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(i)}),s=await Promise.race([o,m(r)]),n=await s.json();if(!s.ok){const e=new Error(n||"Failed to add department!");throw e}},async editDepartment({dispatch:e,rootGetters:t},a){const i={ID:a.depId,Name:a.depName,CompanyID:a.comId};await e("auth/checkTokens",null,{root:!0});const o=await fetch(`${l}department`,{method:"PUT",headers:{Authorization:`Bearer ${t["auth/token"].token}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(i)}),s=await Promise.race([o,m(r)]),n=await s.json();if(!s.ok){const e=new Error(n||"Failed to edit department!");throw e}},async deleteDepartment({dispatch:e,rootGetters:t},a){await e("auth/checkTokens",null,{root:!0});const i=await fetch(`${l}department/${a.depId}?deleteEmployees=${a.deleteEmployees}&&targetDepId=${a.targetDepId}`,{method:"DELETE",headers:{Authorization:`Bearer ${t["auth/token"].token}`,Accept:"application/json","Content-Type":"application/json"}}),o=await Promise.race([i,m(r)]),s=await o.json();if(!o.ok){const e=new Error(s||"Failed to delete department!");throw e}}},w={departments(e){return e.departments},hasDepartments(e){return!!e.departments&&e.departments.length>0},department(e){return e.department},hasDepartment(e){return!!e.department}},g={namespaced:!0,state(){return{departments:[],department:null}},mutations:h,getters:w,actions:y},f={setEmployees(e,t){e.emCount=t.emCount,e.employees=t.employees},setEmployee(e,t){e.employee=t}},k={async loadEmployee({commit:e,dispatch:t,rootGetters:a},i){await t("auth/checkTokens",null,{root:!0});const o=await fetch(`${l}employee/${i.empid}`,{method:"GET",headers:{Authorization:`Bearer ${a["auth/token"].token}`}}),s=await Promise.race([o,m(r)]),n=await s.json();if(!s.ok){const e=new Error(n||"Failed to load employee data!");throw e}const d={ID:n.id,FirstName:n.firstName,LastName:n.lastName,JobTitle:n.jobTitle,Degree:n.degree,Email:n.email,Address:n.address,Phone:n.phone,DateOfBirth:n.dateOfBirth,StartOfEmployment:n.startOfEmployment,HourlyRate:n.hourlyRate,DepartmentId:n.departmentId};e("setEmployee",d)},async loadEmployees({commit:e,dispatch:t,rootGetters:a},i){await t("auth/checkTokens",null,{root:!0});const o=await fetch(`${l}employee/${i.link}`,{method:"GET",headers:{Authorization:`Bearer ${a["auth/token"].token}`}}),s=await Promise.race([o,m(r)]),n=await s.json();if(!s.ok){const e=new Error(n||"Failed to load employees from company!");throw e}const d=[];for(const r in n.toReturn){const e={ID:n.toReturn[r].id,FirstName:n.toReturn[r].firstName,LastName:n.toReturn[r].lastName,JobTitle:n.toReturn[r].jobTitle,Degree:n.toReturn[r].degree,Address:n.toReturn[r].address,Email:n.toReturn[r].email,Phone:n.toReturn[r].phone,DateOfBirth:n.toReturn[r].dateOfBirth,StartOfEmployment:n.toReturn[r].startOfEmployment,HourlyRate:n.toReturn[r].hourlyRate,DepartmentId:n.toReturn[r].departmentId,Department:n.toReturn[r].department};d.push(e)}e("setEmployees",{employees:d,emCount:n.count})},async addEmployee({dispatch:e,rootGetters:t},a){const i={FirstName:a.empFirstName,LastName:a.empLastName,Address:a.empAddress,Email:a.empEmail,Phone:a.empPhone,JobTitle:a.empJobTitle,Degree:a.empDegree,DateOfBirth:a.empDateOfBirth.split(".").reverse().join("/"),StartOfEmployment:a.empStartOfEmployment.split(".").reverse().join("/"),HourlyRate:a.empHourlyRate,DepartmentId:a.empDepartmentId};await e("auth/checkTokens",null,{root:!0});const o=await fetch(`${l}employee/`,{method:"POST",headers:{Authorization:`Bearer ${t["auth/token"].token}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(i)}),s=await Promise.race([o,m(r)]),n=await s.json();if(!s.ok){const e=new Error(n||"Failed to add an employee!");throw e}},async editEmployee({dispatch:e,rootGetters:t},a){await e("auth/checkTokens",null,{root:!0});const i={ID:a.empId,DepartmentId:a.empDepartmentId,FirstName:a.empFirstName,LastName:a.empLastName,JobTitle:a.empJobTitle,Degree:a.empDegree,Address:a.empAddress,Email:a.empEmail,Phone:a.empPhone,DateOfBirth:a.empDateOfBirth.split(".").reverse().join("/"),StartOfEmployment:a.empStartOfEmployment.split(".").reverse().join("/"),HourlyRate:a.empHourlyRate},o=await fetch(`${l}employee`,{method:"PUT",headers:{Authorization:`Bearer ${t["auth/token"].token}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(i)}),s=await Promise.race([o,m(r)]),n=await s.json();if(!s.ok){const e=new Error(n||"Failed to edit employee!");throw e}},async deleteEmployee({dispatch:e,rootGetters:t},a){await e("auth/checkTokens",null,{root:!0});const i=await fetch(`${l}employee/${a.empId}`,{method:"DELETE",headers:{Authorization:`Bearer ${t["auth/token"].token}`,Accept:"application/json","Content-Type":"application/json"}}),o=await Promise.race([i,m(r)]),s=await o.json();if(!o.ok){const e=new Error(s||"Failed to delete employee!");throw e}}},v={employees(e){return e.employees},hasEmployees(e){return!!e.employees&&e.employees.length>0},employee(e){return e.employee},hasEmployee(e){return!!e.employee},numberOfEmployees(e){return e.emCount}},_={namespaced:!0,state(){return{employees:[],emCount:0,employee:null}},mutations:f,getters:v,actions:k},D={setWorkingTimes(e,t){e.workingTimes=t.wts,e.wtCount=t.wtcount},setWorkingTime(e,t){e.workingTime=t}},b={async loadWorkingTimes({commit:e,dispatch:t,rootGetters:a},i){await t("auth/checkTokens",null,{root:!0});const o=i.link,s=await fetch(`${l}${o}${i.id}?PageNumber=${i.pageNumber}&PageSize=${i.pageSize}`,{method:"GET",headers:{Authorization:`Bearer ${a["auth/token"].token}`}}),n=await Promise.race([s,m(r)]),d=await n.json();if(!n.ok){const e=new Error(d||"Failed to load working times!");throw e}const c=[];for(const r in d.toReturn){const e={ID:d.toReturn[r].id,Date:d.toReturn[r].date,StartTime:d.toReturn[r].startTime,EndTime:d.toReturn[r].endTime,EmployeeID:d.toReturn[r].employeeID,Employee:d.toReturn[r].employee};c.push(e)}e("setWorkingTimes",{wts:c,wtcount:d.count})},async loadWorkingTime({commit:e,dispatch:t,rootGetters:a},i){await t("auth/checkTokens",null,{root:!0});const o=await fetch(`${l}workingtime/GetWorkingTime/${i}`,{method:"GET",headers:{Authorization:`Bearer ${a["auth/token"].token}`}}),s=await Promise.race([o,m(r)]),n=await s.json();if(!s.ok){const e=new Error(n||"Failed to load specific working time!");throw e}const d={ID:n.id,Employee:n.employee,WtDate:n.date,StartTime:n.startTime,EndTime:n.endTime};e("setWorkingTime",d)},async addWorkingTimes({dispatch:e,rootGetters:t},a){await e("auth/checkTokens",null,{root:!0});const i=a.employees.filter((e=>e.didWork)).map((e=>({EmployeeId:e.id,Date:e.date.split(".").reverse().join("/"),StartTime:e.startTime,EndTime:e.endTime})));console.log(i);const o=await fetch(`${l}workingtime/createmultiple/`,{method:"POST",headers:{Authorization:`Bearer ${t["auth/token"].token}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(i)}),s=await Promise.race([o,m(r)]);let n=await s.json();if(!s.ok){n=n.replace("That","Some of those").replace("employee","employees").replace("has","have");const e=new Error(n||"Failed to add working time!");throw e}},async addWorkingTime({dispatch:e,rootGetters:t},a){await e("auth/checkTokens",null,{root:!0});const i={EmployeeId:a.wtEmployeeId,Date:a.wtDate.split(".").reverse().join("/"),StartTime:a.wtStartTime,EndTime:a.wtEndTime},o=await fetch(`${l}workingtime/create/`,{method:"POST",headers:{Authorization:`Bearer ${t["auth/token"].token}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(i)}),s=await Promise.race([o,m(r)]),n=await s.json();if(!s.ok){const e=new Error(n||"Failed to add working time!");throw e}},async deleteWorkingTime({dispatch:e,rootGetters:t},a){await e("auth/checkTokens",null,{root:!0});const i=await fetch(`${l}workingtime/deleteWorkingTime/${a.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${t["auth/token"].token}`,Accept:"application/json","Content-Type":"application/json"}}),o=await Promise.race([i,m(r)]),s=await o.json();if(!o.ok){const e=new Error(s||"Failed to delete working time!");throw e}},async editWorkingTime({dispatch:e,rootGetters:t},a){await e("auth/checkTokens",null,{root:!0});const i={ID:a.wtId,Date:a.wtDate.split(".").reverse().join("/"),StartTime:a.wtStartTime,EndTime:a.wtEndTime,EmployeeId:a.wtEmployeeId},o=await fetch(`${l}workingtime/editWorkingTime`,{method:"PUT",headers:{Authorization:`Bearer ${t["auth/token"].token}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(i)}),s=await Promise.race([o,m(r)]),n=await s.json();if(!s.ok){const e=new Error(n||"Failed to edit working time!");throw e}}},E={workingTimes(e){return e.workingTimes},hasWorkingTimes(e){return!!e.workingTimes&&e.workingTimes.length>0},workingTime(e){return e.workingTime},hasWorkingTime(e){return!!e.workingTime},numberOfWorkingTimes(e){return e.wtCount}},I={namespaced:!0,state(){return{workingTimes:[],wtCount:0,workingTime:null}},mutations:D,getters:E,actions:b},T={setUser(e,t){e.userId=t.Id},setUserLoginData(e,t){e.userId=t.id,e.token=t.tokenValue.token,e.refreshToken=t.tokenValue.refreshToken,e.expiresAt=t.tokenValue.expiresAt},setUserData(e,t){e.userId=t.id,e.token=t.token,e.refreshToken=t.refreshToken,e.expiresAt=t.expiresAt},setToken(e,t){e.token=t.token,e.refreshToken=t.refreshToken,e.expiresAt=t.expiresAt},setCurrentUser(e,t){e.currentUser=t},logout(e){e.userId=null,e.token="",e.refreshToken="",e.expiresAt=0,localStorage.removeItem("userId"),localStorage.removeItem("refreshToken"),localStorage.removeItem("token"),localStorage.removeItem("expiresAt")}},C={async register(e){const t=fetch(`${l}Authentication/register-user`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}),a=await Promise.race([t,m(r)]),i=await a.json();if(!a.ok){const e=new Error(i||"Failed to create new user!");throw e}},async getUser({commit:e,dispatch:t,rootGetters:a}){await t("auth/checkTokens",null,{root:!0});const i=await fetch(`${l}Authentication/get-user`,{method:"GET",headers:{Authorization:`Bearer ${a["auth/token"].token}`}}),o=await Promise.race([i,m(r)]),s=await o.json();if(!o.ok){const e=new Error(s||"Failed to load user data!");throw e}const n={FirstName:s.firstName,LastName:s.lastName,Email:s.email};e("setCurrentUser",n)},async editUser({dispatch:e,rootGetters:t},a){await e("auth/checkTokens",null,{root:!0});const i=await fetch(`${l}Authentication/edit-user`,{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${t["auth/token"].token}`},body:JSON.stringify(a)}),o=await Promise.race([i,m(r)]),s=await o.json();if(!o.ok){const e=new Error(s||"Failed to update user data!");throw e}},async login({commit:e},t){const a=await fetch(`${l}Authentication/login-user`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}),i=await Promise.race([a,m(r)]),o=await i.json();if(!i.ok){const e=new Error(o||"Failed to login!");throw e}e("setUserLoginData",o),localStorage.setItem("userId",o.id),localStorage.setItem("token",o.tokenValue.token),localStorage.setItem("refreshToken",o.tokenValue.refreshToken),localStorage.setItem("expiresAt",o.tokenValue.expiresAt)},async logout(e){e.commit("logout")},setUserData(e,t){e.commit("setUserData",t)},async checkTokens({commit:e,getters:t}){if(null!==t.userId&&new Date(t.expiresAt).getTime()+12e4<=Date.now()){const a=await fetch(`${l}authentication/refresh-token`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t.token)}),i=await Promise.race([a,m(r)]),o=await i.json();if(!i.ok){const e=new Error(o||"Failed to refresh token!");throw e}e("setToken",o)}}},S={isAuthenticated(e){return!!e.userId&&!!e.token},token(e){return{token:e.token,refreshToken:e.refreshToken}},expiresAt(e){return e.expiresAt},currentUser(e){return e.currentUser},hasCurrentUser(e){return!!e.currentUser}},$={namespaced:!0,state(){return{userId:null,expiresAt:0,refreshToken:"",token:"",currentUser:null}},mutations:T,actions:C,getters:S},j={setStatistics(e,t){e.statistics=t}},V={async loadStatistics({commit:e,dispatch:t,rootGetters:a},i){await t("auth/checkTokens",null,{root:!0});const o=await fetch(`${l}calculation/${i.comid}?year=${i.year}&month=${i.month}`,{method:"GET",headers:{Authorization:`Bearer ${a["auth/token"].token}`}}),s=await Promise.race([o,m(r)]),n=await s.json();if(!s.ok){const e=new Error(n||"Failed to load statistic data!");throw e}const d=[];for(const r in n){const e={ID:n[r].id,FirstName:n[r].firstName,LastName:n[r].lastName,Department:n[r].department,HourlyRate:n[r].hourlyRate,WorkingDays:n[r].workingDays,RegularWorkingHours:n[r].regularWorkingHours,OvertimeHours:n[r].overtimeHours,Earnings:n[r].earnings};d.push(e)}e("setStatistics",d)}},N={hasStatistics(e){return!!e.statistics&&e.statistics.length>0},statistics(e){return e.statistics}},A={namespaced:!0,state(){return{statistics:[]}},mutations:j,getters:N,actions:V},W={},U={async generateData({dispatch:e,rootGetters:t},a){await e("auth/checkTokens",null,{root:!0});const i=await fetch(`${l}randomgenerate/${a.comid}/${a.numberOfEmployees}/${a.numberOfDays}`,{method:"POST",headers:{Authorization:`Bearer ${t["auth/token"].token}`}}),o=await Promise.race([i,m(r)]),s=await o.json();if(!o.ok){const e=new Error(s||"Failed to generate data!");throw e}}},F={},L={namespaced:!0,state(){return{}},mutations:W,getters:F,actions:U};const M=(0,s.MT)({modules:{companies:p,departments:g,employees:_,workingTimes:I,auth:$,statistics:A,generate:L}});var P=M,O=a(3396),z=a.p+"img/profile.09c153d9.jpg";const q=e=>((0,O.dD)("data-v-02ec7bf6"),e=e(),(0,O.Cn)(),e),B={class:"links"},x={style:{width:"50%"}},Y=q((()=>(0,O._)("h1",null,"Installation manual",-1))),R=q((()=>(0,O._)("h1",null,"User manual",-1))),H=q((()=>(0,O._)("p",null,[(0,O._)("a",{href:"https://www.linkedin.com/in/aleksandar-matic-8a7b21120/",target:"_blank"},[(0,O._)("img",{class:"profile",src:z,alt:""})]),(0,O.Uk)(" Hello, everyone! My name is "),(0,O._)("b",null,"Aleksandar Matic"),(0,O.Uk)(", and I'm currently a high school professor of Information Technologies aiming to start a new career path as a "),(0,O._)("b",null,"web developer"),(0,O.Uk)(". I graduated on "),(0,O._)("b",null,"Faculty of Information Technologies"),(0,O.Uk)(" on "),(0,O._)("b",null,"Slobomir P University"),(0,O.Uk)(" and have been in education department for the last 12 years "),(0,O._)("b",null,"teaching programming languages, wed development, databases and a little bit of web design"),(0,O.Uk)(". I've decided to switch my current career path to development, so, here I am. My skills are both backend and frontend oriented, meaning I'm aiming to be a full stack developer. They include (but are not limited to) the following technologies: ")],-1))),Z=q((()=>(0,O._)("ol",null,[(0,O._)("li",null,[(0,O._)("b",null,"C#"),(0,O._)("ol",{type:"a"},[(0,O._)("li",null,"ASP.NET, ASP.NET core, ASP.NET MVC, Web API"),(0,O._)("li",null,"WPF, MVVM, .NET6"),(0,O._)("li",null,"RazorPages")])]),(0,O._)("li",null,[(0,O._)("b",null,"JavaScript"),(0,O._)("ol",{type:"a"},[(0,O._)("li",null,"Vanilla JS, ES6"),(0,O._)("li",null,"TypeScript"),(0,O._)("li",null,"Vue JS")])]),(0,O._)("li",null,[(0,O._)("b",null,"TSQL")]),(0,O._)("li",null,[(0,O._)("b",null,"Others"),(0,O._)("ol",{type:"a"},[(0,O._)("li",null,"HTML, CSS, Bootstrap, REST, Git, JSON…")])])],-1))),J=q((()=>(0,O._)("p",null,[(0,O.Uk)(" Now, let's not make this longer than it needs to be. In case you need some other info or contant data, feel free to visit my "),(0,O._)("a",{href:"https://www.linkedin.com/in/aleksandar-matic-8a7b21120/",target:"_blank"},"LinkedIn profile"),(0,O.Uk)(". Let's get to the instruction itself, shall we? ")],-1))),G=q((()=>(0,O._)("p",null," Before I dive into installation, let me briefly explain technologies used in this project for my potential future employees: ",-1))),K=q((()=>(0,O._)("ol",null,[(0,O._)("li",null,[(0,O._)("b",null,"Backend"),(0,O._)("ol",{type:"a"},[(0,O._)("li",null,"ASP.NET Web API"),(0,O._)("li",null,"Entity Framework"),(0,O._)("li",null,"AutoMapper for converting models to DTOs and vice-versa"),(0,O._)("li",null,"Repository Pattern for organizing database connection"),(0,O._)("li",null,"Code-first migrations"),(0,O._)("li",null,"Unit of Work pattern with some small modifications"),(0,O._)("li",null,"JWT for authentication"),(0,O._)("li",null,"Refresh token")])]),(0,O._)("li",null,[(0,O._)("b",null,"Frontend"),(0,O._)("ol",{type:"a"},[(0,O._)("li",null,"Vue.js framework"),(0,O._)("li",null,"Vuex for organizing data"),(0,O._)("li",null," Router for managing routes, redirections and authentication guards "),(0,O._)("li",null,"Standard HTML and CSS for some basic design")])]),(0,O._)("li",null,[(0,O._)("b",null,"Database"),(0,O._)("ol",{type:"a"},[(0,O._)("li",null,"TSQL server")])])],-1))),Q=q((()=>(0,O._)("h3",null,"Required software installation guide, if you want to use it soley on your own computer",-1))),X=q((()=>(0,O._)("h3",null,"Application user manual",-1)));function ee(e,t,a,i,o,s){const n=(0,O.up)("router-link"),r=(0,O.up)("base-card");return(0,O.wg)(),(0,O.iD)("div",null,[(0,O.Wm)(r,null,{default:(0,O.w5)((()=>[(0,O._)("div",B,[(0,O._)("table",x,[(0,O._)("tr",null,[(0,O._)("th",null,[(0,O.Wm)(n,{to:"/installationmanual"},{default:(0,O.w5)((()=>[Y])),_:1})]),(0,O._)("th",null,[(0,O.Wm)(n,{to:"/usermanual"},{default:(0,O.w5)((()=>[R])),_:1})])])])]),H,Z,J,G,K,(0,O._)("p",null,[(0,O.Uk)("Proceed to: "),(0,O.Wm)(n,{to:"/installationmanual"},{default:(0,O.w5)((()=>[Q])),_:1}),(0,O.Wm)(n,{to:"/usermanual"},{default:(0,O.w5)((()=>[X])),_:1})])])),_:1})])}var te={created(){d()}},ae=a(89);const ie=(0,ae.Z)(te,[["render",ee],["__scopeId","data-v-02ec7bf6"]]);var oe=ie,se=a.p+"img/App01.94c69e6d.jpg",ne=a.p+"img/App02.3b350596.jpg",re=a.p+"img/App03.ac052f19.jpg",le=a.p+"img/App04.4aa648a5.jpg",de=a.p+"img/App05.dc5a7a37.jpg",me=a.p+"img/App06.0de32548.jpg",ce=a.p+"img/App07.72577e47.jpg",ue=a.p+"img/App08.ecc1acea.jpg";const pe=e=>((0,O.dD)("data-v-d0f9668e"),e=e(),(0,O.Cn)(),e),he={class:"links"},ye={style:{width:"100%"}},we=pe((()=>(0,O._)("h1",null,"About me",-1))),ge=pe((()=>(0,O._)("h1",null,"Installation manual",-1))),fe=pe((()=>(0,O._)("p",null," Usage is quite simple, really. The app is meant to take care of the working times of employees in any company, along wth the stats displaying working hours, overtime hours and earned money. ",-1))),ke=pe((()=>(0,O._)("p",null," Once you press Login/Signup link in the upper right corner, you will get a possibility to either login, or register. ",-1))),ve=pe((()=>(0,O._)("p",null,[(0,O._)("img",{src:se,alt:""})],-1))),_e=pe((()=>(0,O._)("p",null," Fill in the form the way you want (data, of course, does not have to be accurate or real) and you just made yourself a profile! The app will redirect you to the login page. After you login, you can add a company (or more of them). ",-1))),De=pe((()=>(0,O._)("p",null,' Every company you own will be displayed on the "All companies" link in the navigation bar. Once you click on it, you will get something like this: ',-1))),be=pe((()=>(0,O._)("p",null,[(0,O._)("img",{src:ne,alt:""})],-1))),Ee=pe((()=>(0,O._)("p",null,' In order to see the employees or departments, you must click on the "Details" button on the right side of the company element. You\'ll get something like this: ',-1))),Ie=pe((()=>(0,O._)("p",null,[(0,O._)("img",{src:re,alt:""})],-1))),Te=pe((()=>(0,O._)("p",null,[(0,O.Uk)(" You can now see that extra options appeared on the nav bar. "),(0,O._)("ul",null,[(0,O.Uk)("By pressing the self explanatory buttons in the lower part of the screen, you can do the following: "),(0,O._)("li",null,"Edit company data"),(0,O._)("li",null,"See the department list"),(0,O._)("li",null,"See the list of employees"),(0,O._)("li",null,"See the working times of all company workers"),(0,O._)("li",null,"See the calculations"),(0,O._)("li",null,"Delete company")])],-1))),Ce=pe((()=>(0,O._)("p",null," Edit company is pretty much self-explanatory. If you tap on the Departments button, you'll get something like this: ",-1))),Se=pe((()=>(0,O._)("p",null,[(0,O._)("img",{src:le,alt:""})],-1))),$e=pe((()=>(0,O._)("p",null,"Pressing the Details button will allow you to see everything about that department, as well as edit it.",-1))),je=pe((()=>(0,O._)("p",null,[(0,O._)("img",{src:de,alt:""})],-1))),Ve=pe((()=>(0,O._)("p",null," Now, I'm perfectly aware, if you're just checking out the app, you're not willing to add, like, 20 workers and, like, 1 month of their working times day by day, so I made a possibility to generate them randomly. Once you open Employees list, you'll be able to generate certain ammount of employees per department you made and a certain number of working days by cliking on the \"randomly generate both employees and their working times\", just below the nav bar. Their working hours will also be randomly generated, in range from 6 do 10. Now, if you ether decide to see all the employees from the company, or just the specific ones from some department, the appereance will be the same. As you can see, you can view data about the employee, as well as display and filter them by various criteria and numbers. ",-1))),Ne=pe((()=>(0,O._)("p",null,[(0,O._)("img",{src:me,alt:""})],-1))),Ae=pe((()=>(0,O._)("p",null," In case you want to see their working times, you may do so from the company menu (and see working times of all employees), from the department menu (and see only those under that department), or individually, from the employee details page. ",-1))),We=pe((()=>(0,O._)("p",null,[(0,O._)("img",{src:ce,alt:""})],-1))),Ue=pe((()=>(0,O._)("p",null,' If you decide to see statistic for any given month, you may do so by clicking on the "Statistics" button from Company Details page. You will get something like this. Just select the period you need the stats for. ',-1))),Fe=pe((()=>(0,O._)("p",null,[(0,O._)("img",{src:ue,alt:""})],-1))),Le=pe((()=>(0,O._)("p",null,[(0,O.Uk)("And that's it! If you notice some errors or you want to contact me, you can mail me to "),(0,O._)("a",{href:"mailto:aleksandar.matic986@gmail.com"},"aleksandar.matic986@gmail.com"),(0,O.Uk)(". Cheers!")],-1)));function Me(e,t){const a=(0,O.up)("router-link"),i=(0,O.up)("base-card");return(0,O.wg)(),(0,O.iD)("div",null,[(0,O.Wm)(i,null,{default:(0,O.w5)((()=>[(0,O._)("div",he,[(0,O._)("table",ye,[(0,O._)("tr",null,[(0,O._)("th",null,[(0,O.Wm)(a,{to:"/about"},{default:(0,O.w5)((()=>[we])),_:1})]),(0,O._)("th",null,[(0,O.Wm)(a,{to:"/installationmanual"},{default:(0,O.w5)((()=>[ge])),_:1})])])])]),fe,ke,ve,_e,De,be,Ee,Ie,Te,Ce,Se,$e,je,Ve,Ne,Ae,We,Ue,Fe,Le])),_:1})])}const Pe={},Oe=(0,ae.Z)(Pe,[["render",Me],["__scopeId","data-v-d0f9668e"]]);var ze=Oe,qe=a.p+"img/SQL1.57401e13.jpg",Be=a.p+"img/SQL2.394c84af.jpg",xe=a.p+"img/SQL3.05f37746.jpg",Ye=a.p+"img/VS1.303f692f.jpg";const Re=e=>((0,O.dD)("data-v-796727dc"),e=e(),(0,O.Cn)(),e),He={class:"links"},Ze={style:{width:"100%"}},Je=Re((()=>(0,O._)("h1",null,"About me",-1))),Ge=Re((()=>(0,O._)("h1",null,"User manual",-1))),Ke=Re((()=>(0,O._)("p",null,[(0,O.Uk)(" First of all, "),(0,O._)("b",null,"this is a demo app"),(0,O.Uk)(". That means it's not created to actually solve some major issues, or be distributed among others, but to demonstrate my personal capabilities of creating certain type of projects and actually work in a development department. Having that in mind, I would suggest you "),(0,O._)("b",null,"don't pay too much of attention to the design itself"),(0,O.Uk)(". I'm not a designer and I'm using only a little bit of prettier design than the basic one. ")],-1))),Qe=Re((()=>(0,O._)("p",null,[(0,O.Uk)(" Head down to my "),(0,O._)("b",null,[(0,O._)("a",{href:"https://github.com/aleksbn",target:"_blank"},"git repository")]),(0,O.Uk)(" and download this "),(0,O._)("b",null,[(0,O._)("a",{href:"https://github.com/aleksbn/TimeSheetApp",target:"_blank"},"project")]),(0,O.Uk)(". You can notice there are both backend and frontend parts of this app. The SPA (single page application) is frontend, and Backend is, well, backend. What do you need in order to start the app? You need "),(0,O._)("b",null,"an IIS, a SQL server and a node.js server"),(0,O.Uk)(". There is no specific sequence of installation you suppose to follow. You can install all of them in any sequence you want to. ")],-1))),Xe=Re((()=>(0,O._)("p",null," This app is just for the demo purposes, so this manual is about starting it on your own computer. If you actually like the project and see fits to use it, you can contact me and require version adapted to your own needs. So, here we go… ",-1))),et=Re((()=>(0,O._)("h3",null,"1. SQL server",-1))),tt=Re((()=>(0,O._)("p",null,[(0,O.Uk)(" Download both "),(0,O._)("a",{href:"https://go.microsoft.com/fwlink/p/?linkid=2216019&clcid=0x409&culture=en-us&country=us"},"server"),(0,O.Uk)(" and "),(0,O._)("a",{href:"https://aka.ms/ssmsfullsetup"},"server management studio"),(0,O.Uk)(" and install them. In case you need help with the installation, here’s the link: ")],-1))),at=Re((()=>(0,O._)("div",{style:{"text-align":"center"}},[(0,O._)("iframe",{width:"640",height:"360",src:"https://www.youtube.com/embed/kGdTg-vGs-E",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:""})],-1))),it=Re((()=>(0,O._)("p",null," After the installation, open SQL server management studio and log in with your credentials. You'll get the following window: ",-1))),ot=Re((()=>(0,O._)("p",null,[(0,O._)("img",{src:qe,style:{width:"100%"},alt:""})],-1))),st=Re((()=>(0,O._)("p",null," Open Databases folder in the Object Explorer on the left side of the window. ",-1))),nt=Re((()=>(0,O._)("p",null,[(0,O._)("img",{src:Be,style:{width:"100%"},alt:""})],-1))),rt=Re((()=>(0,O._)("p",null,[(0,O.Uk)(" Right-click on the Databses and select "),(0,O._)("b",null,"“New database…”"),(0,O.Uk)(" and type in "),(0,O._)("b",null,"“TimeSheetDB”"),(0,O.Uk)(" in the "),(0,O._)("b",null,"“Database name”"),(0,O.Uk)(" field: ")],-1))),lt=Re((()=>(0,O._)("p",null,[(0,O._)("img",{src:xe,style:{width:"100%"},alt:""})],-1))),dt=Re((()=>(0,O._)("h3",null,"2. Next, you need IIS server to mount the backend app.",-1))),mt=Re((()=>(0,O._)("p",null,[(0,O.Uk)(" I would suggest installing Visual Studio as it is the easiest configuration process, plus, you can edit code to suits your needs. Here's the "),(0,O._)("a",{href:"https://visualstudio.microsoft.com/thank-you-downloading-visual-studio/?sku=Community&channel=Release&version=VS2022&source=VSLandingPage&cid=2030&passive=false",target:"_blank"},"link"),(0,O.Uk)(" for downloading, and here's the instruction video: ")],-1))),ct=Re((()=>(0,O._)("div",{style:{"text-align":"center"}},[(0,O._)("iframe",{width:"640",height:"360",src:"https://www.youtube.com/embed/-FhQM01qsBY",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:""})],-1))),ut=Re((()=>(0,O._)("p",null,[(0,O.Uk)(" Once you have it installed, start the solution file under the "),(0,O._)("b",null,"TimeSheetApp.sln"),(0,O.Uk)(" name and you'll see the "),(0,O._)("b",null,"backend"),(0,O.Uk)(" project with all of it's files. ")],-1))),pt=Re((()=>(0,O._)("p",null,[(0,O.Uk)(" Open the file "),(0,O._)("b",null,"“appsettings.json”"),(0,O.Uk)(" and edit the line number 10 "),(0,O._)("b",null,"(DefaultConnection)"),(0,O.Uk)(". ")],-1))),ht=Re((()=>(0,O._)("p",null,[(0,O._)("img",{src:Ye,style:{width:"100%"},alt:""})],-1))),yt=Re((()=>(0,O._)("p",null,[(0,O.Uk)(" Instead of my "),(0,O._)("b",null,"DataSource"),(0,O.Uk)(", you need to paste in "),(0,O._)("b",null,"your server name"),(0,O.Uk)(". You can find it if your "),(0,O._)("b",null,"SQL server management studio"),(0,O.Uk)(", when you right click on the "),(0,O._)("b",null,"server name"),(0,O.Uk)(" in "),(0,O._)("b",null,"Object Explorer"),(0,O.Uk)(" and select "),(0,O._)("b",null,"Properties"),(0,O.Uk)(". ")],-1))),wt=Re((()=>(0,O._)("p",null,[(0,O.Uk)(" That's it, as fas as the backend goes! Just press the F5 (make sure the "),(0,O._)("b",null,"https profile"),(0,O.Uk)(" is selected) and you're done! "),(0,O._)("b",null,"IIS"),(0,O.Uk)(" is working! ")],-1))),gt=Re((()=>(0,O._)("h3",null,"3. The final part is installing Node.js for the frontend part.",-1))),ft=Re((()=>(0,O._)("p",null,[(0,O.Uk)(" Here's the "),(0,O._)("a",{href:"https://nodejs.org/dist/v18.16.1/node-v18.16.1-x64.msi",target:"_blank"},"link"),(0,O.Uk)(" for download, and the instructional video: ")],-1))),kt=Re((()=>(0,O._)("div",{style:{"text-align":"center"}},[(0,O._)("iframe",{width:"640",height:"360",src:"https://www.youtube.com/embed/Gu9KdbpzSvk",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:""})],-1))),vt=Re((()=>(0,O._)("p",null,[(0,O.Uk)(" When you're done with the installation, start it from either the "),(0,O._)("b",null,"terminal in your frontend code editor"),(0,O.Uk)(" (I'm using Visual Studio Code), or the "),(0,O._)("b",null,"basic command prompt"),(0,O.Uk)(". "),(0,O._)("i",null,"Just make sure you're in the frontend project folder before starting it."),(0,O.Uk)(" You can start it with typing in the following command (for windows users): "),(0,O._)("b",null,"npm run serve")],-1))),_t=Re((()=>(0,O._)("p",null,[(0,O.Uk)(" And that's it! Once you're done with all of this, open browser and type in "),(0,O._)("a",{href:"http://localhost:8080/",target:"_blank"},"http://localhost:8080/"),(0,O.Uk)(" and it will open the app. ")],-1)));function Dt(e,t){const a=(0,O.up)("router-link"),i=(0,O.up)("base-card");return(0,O.wg)(),(0,O.iD)("div",null,[(0,O.Wm)(i,null,{default:(0,O.w5)((()=>[(0,O._)("div",He,[(0,O._)("table",Ze,[(0,O._)("tr",null,[(0,O._)("th",null,[(0,O.Wm)(a,{to:"/about"},{default:(0,O.w5)((()=>[Je])),_:1})]),(0,O._)("th",null,[(0,O.Wm)(a,{to:"/usermanual"},{default:(0,O.w5)((()=>[Ge])),_:1})])])])]),Ke,Qe,Xe,et,tt,at,it,ot,st,nt,rt,lt,dt,mt,ct,ut,pt,ht,yt,wt,gt,ft,kt,vt,_t])),_:1})])}const bt={},Et=(0,ae.Z)(bt,[["render",Dt],["__scopeId","data-v-796727dc"]]);var It=Et,Tt=a(2268);const Ct=(0,O._)("section",null,[(0,O._)("h2",{style:{"text-align":"center"}},"Add a new company")],-1),St={key:0};function $t(e,t,a,i,o,s){const n=(0,O.up)("base-dialog"),r=(0,O.up)("base-spinner"),l=(0,O.up)("company-form");return(0,O.wg)(),(0,O.iD)("div",null,[Ct,(0,O.Wm)(n,{show:!!o.error,title:"An error occured",showClose:!0,onClose:s.handleError},{default:(0,O.w5)((()=>[(0,O._)("p",null,(0,Tt.zw)(o.error),1)])),_:1},8,["show","onClose"]),o.isLoading?((0,O.wg)(),(0,O.iD)("div",St,[(0,O.Wm)(r)])):(0,O.kq)("",!0),(0,O._)("section",null,[(0,O.Wm)(l,{onSaveData:s.saveData,Mode:this.EditMode},null,8,["onSaveData","Mode"])])])}const jt=e=>((0,O.dD)("data-v-6fdced5a"),e=e(),(0,O.Cn)(),e),Vt={key:0,class:"form-control"},Nt=jt((()=>(0,O._)("label",{for:"ID"},"ID:",-1))),At=["value"],Wt=jt((()=>(0,O._)("label",{for:"Name"},"Name:",-1))),Ut=["disabled"],Ft={key:1,class:"invalid"},Lt=jt((()=>(0,O._)("label",{for:"Address"},"Address:",-1))),Mt=["disabled"],Pt={key:2,class:"invalid"},Ot=jt((()=>(0,O._)("label",{for:"City"},"City:",-1))),zt=["disabled"],qt={key:3,class:"invalid"},Bt=jt((()=>(0,O._)("label",{for:"Country"},"Country:",-1))),xt=["disabled"],Yt={key:4,class:"invalid"},Rt=jt((()=>(0,O._)("label",{for:"Email"},"Email:",-1))),Ht=["disabled"],Zt={key:5,class:"invalid"},Jt=jt((()=>(0,O._)("label",{for:"StartTime"},"Start time:",-1))),Gt=["disabled"],Kt=jt((()=>(0,O._)("label",{for:"EndTime"},"End time:",-1))),Qt=["disabled"],Xt={key:6,class:"invalid"},ea={key:7};function ta(e,t,a,o,s,n){const r=(0,O.up)("base-button"),l=(0,O.up)("base-card");return(0,O.wg)(),(0,O.iD)("div",null,[(0,O.Wm)(l,null,{default:(0,O.w5)((()=>[(0,O._)("form",{onSubmit:t[10]||(t[10]=(0,i.iM)((e=>n.submitForm()),["prevent"]))},["old"===this.Mode?((0,O.wg)(),(0,O.iD)("div",Vt,[Nt,(0,O._)("input",{type:"text",name:"ID",disabled:"",value:this.ID},null,8,At)])):(0,O.kq)("",!0),(0,O._)("div",{class:(0,Tt.C_)(["form-control",{invalid:!s.comName.isValid}])},[Wt,(0,O._)("input",{type:"text",name:"Name",ref:"comName",disabled:!n.editMode,onBlur:t[0]||(t[0]=e=>n.clearValidity("comName"))},null,40,Ut)],2),s.comName.isValid?(0,O.kq)("",!0):((0,O.wg)(),(0,O.iD)("p",Ft," Company name cannot be empty. ")),(0,O._)("div",{class:(0,Tt.C_)(["form-control",{invalid:!s.comAddress.isValid}])},[Lt,(0,O._)("input",{type:"text",name:"Address",ref:"comAddress",disabled:!n.editMode,onBlur:t[1]||(t[1]=e=>n.clearValidity("comAddress"))},null,40,Mt)],2),s.comAddress.isValid?(0,O.kq)("",!0):((0,O.wg)(),(0,O.iD)("p",Pt," Company address cannot be empty and it must be at least 5 letters long. ")),(0,O._)("div",{class:(0,Tt.C_)(["form-control",{invalid:!s.comCity.isValid}])},[Ot,(0,O._)("input",{type:"text",name:"City",ref:"comCity",disabled:!n.editMode,onBlur:t[2]||(t[2]=e=>n.clearValidity("comCity"))},null,40,zt)],2),s.comCity.isValid?(0,O.kq)("",!0):((0,O.wg)(),(0,O.iD)("p",qt," Company city cannot be empty and it must contains only letters and possibly ' and . sign (like in some french cities, or like St. Pauli). ")),(0,O._)("div",{class:(0,Tt.C_)(["form-control",{invalid:!s.comCountry.isValid}])},[Bt,(0,O._)("input",{type:"text",name:"Country",ref:"comCountry",disabled:!n.editMode,onBlur:t[3]||(t[3]=e=>n.clearValidity("comCountry"))},null,40,xt)],2),s.comCountry.isValid?(0,O.kq)("",!0):((0,O.wg)(),(0,O.iD)("p",Yt," Company country cannot be empty and must contain only letters. ")),(0,O._)("div",{class:(0,Tt.C_)(["form-control",{invalid:!s.comEmail.isValid}])},[Rt,(0,O._)("input",{type:"text",name:"Email",ref:"comEmail",disabled:!n.editMode,onBlur:t[4]||(t[4]=e=>n.clearValidity("comEmail"))},null,40,Ht)],2),s.comEmail.isValid?(0,O.kq)("",!0):((0,O.wg)(),(0,O.iD)("p",Zt," You must type in a regular email address. ")),(0,O._)("div",{class:(0,Tt.C_)(["form-control",{invalid:!s.comStartTime.isValid}])},[Jt,(0,O._)("input",{type:"time",name:"StartTime",ref:"comStartTime",disabled:!n.editMode,min:"06:00",max:"14:00",value:"07:00",onBlur:t[5]||(t[5]=e=>n.clearValidity("comStartTime"))},null,40,Gt)],2),(0,O._)("div",{class:(0,Tt.C_)(["form-control",{invalid:!s.comEndTime.isValid}])},[Kt,(0,O._)("input",{type:"time",name:"EndTime",ref:"comEndTime",disabled:!n.editMode,onBlur:t[6]||(t[6]=e=>n.clearValidity("comEndTime")),min:"15:00",max:"23:00",value:"15:00"},null,40,Qt)],2),s.comStartTime.isValid&&s.comEndTime.isValid?(0,O.kq)("",!0):((0,O.wg)(),(0,O.iD)("p",Xt," Starting time cannot be before the end of the working time of the company. ")),s.formIsValid?(0,O.kq)("",!0):((0,O.wg)(),(0,O.iD)("p",ea," Please, fix the above errors and submit again. ")),(0,O._)("div",null,[(0,O.Wm)(r,{style:{display:"inline"}},{default:(0,O.w5)((()=>[(0,O.Uk)((0,Tt.zw)(n.textForMode),1)])),_:1}),this.ID?((0,O.wg)(),(0,O.j4)(r,{key:0,link:"",style:{display:"inline"},to:`/departments/${this.ID}`},{default:(0,O.w5)((()=>[(0,O.Uk)("Departments")])),_:1},8,["to"])):(0,O.kq)("",!0),this.ID?((0,O.wg)(),(0,O.j4)(r,{key:1,onClick:t[7]||(t[7]=e=>n.openEmployees()),style:{display:"inline"}},{default:(0,O.w5)((()=>[(0,O.Uk)("Employees")])),_:1})):(0,O.kq)("",!0),this.ID?((0,O.wg)(),(0,O.j4)(r,{key:2,onClick:t[8]||(t[8]=e=>n.openWorkingTimes()),style:{display:"inline"}},{default:(0,O.w5)((()=>[(0,O.Uk)("Working times")])),_:1})):(0,O.kq)("",!0),this.ID?((0,O.wg)(),(0,O.j4)(r,{key:3,link:"",to:n.calculationLink,type:"button",style:{display:"inline"}},{default:(0,O.w5)((()=>[(0,O.Uk)(" See the calculations ")])),_:1},8,["to"])):(0,O.kq)("",!0),this.ID?((0,O.wg)(),(0,O.j4)(r,{key:4,type:"button",onClick:t[9]||(t[9]=e=>n.deleteCompany()),style:{display:"inline"}},{default:(0,O.w5)((()=>[(0,O.Uk)("Delete this company")])),_:1})):(0,O.kq)("",!0)])],32)])),_:1})])}var aa=a(6797),ia=a.n(aa),oa={checkPersonName(e){const t=/^[a-zA-Z]+([ \-']{0,1}[a-zA-Z]+){0,2}[.]{0,1}$/;return t.test(e)},checkEmail(e){const t=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;return t.test(e)},checkPassword(e){const t=/^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{8,50}$/;return t.test(e)},checkCity(e){const t=/^(?:[A-Za-z]{2,}(?:(\.\s|'s\s|\s?-\s?|\s)?(?=[A-Za-z]+))){1,2}(?:[A-Za-z]+)?$/;return t.test(e)},checkCountry(e){const t=/^(?:[A-Za-z]{2,}(?:(\.\s|'s\s|\s?-\s?|\s)?(?=[A-Za-z]+))){1,2}(?:[A-Za-z]+)?$/;return t.test(e)},checkDate(e){return ia()(e,"DD.MM.YYYY",!0).isValid()},checkPhone(e){const t=/^[+]?[0-9]{3,25}$/;return t.test(e)},checkDegree(e){const t=/^[A-Za-z\s]*$/;return t.test(e)}},sa={props:["ID","Name","Address","City","Country","Email","Mode","StartTime","EndTime"],emits:["save-data","delete-company"],data(){return{editModeType:!0,formIsValid:!0,comName:{isValid:!0,val:""},comAddress:{isValid:!0,val:""},comCity:{isValid:!0,val:""},comCountry:{isValid:!0,val:""},comEmail:{isValid:!0,val:""},comStartTime:{isValid:!0,val:""},comEndTime:{isValid:!0,val:""}}},methods:{clearValidity(e){this[e].isValid=!0},validateForm(){this.formIsValid=!0,""===this.comName.val&&(this.comName.isValid=!1,this.formIsValid=!1),this.comAddress.val.length<5&&(this.comAddress.isValid=!1,this.formIsValid=!1),oa.checkCity(this.comCity.val)||(this.comCity.isValid=!1,this.formIsValid=!1),oa.checkCountry(this.comCountry.val)||(this.comCountry.isValid=!1,this.formIsValid=!1),oa.checkEmail(this.comEmail.val)||(this.comEmail.isValid=!1,this.formIsValid=!1),this.comStartTime.val>this.comEndTime.val&&(this.comStartTime.isValid=!1,this.formIsValid=!1),this.comStartTime.val>this.comEndTime.val&&(this.comEndTime.isValid=!1,this.formIsValid=!1)},submitForm(){if(!this.editModeType)return void(this.editModeType=!0);if(this.comName.val=this.$refs.comName.value.trim(),this.comAddress.val=this.$refs.comAddress.value.trim(),this.comCity.val=this.$refs.comCity.value.trim(),this.comCountry.val=this.$refs.comCountry.value.trim(),this.comEmail.val=this.$refs.comEmail.value.trim(),this.comStartTime.val=this.$refs.comStartTime.value,this.comEndTime.val=this.$refs.comEndTime.value,this.validateForm(),!this.formIsValid)return;const e={comName:this.comName.val,comAddress:this.comAddress.val,comCity:this.comCity.val,comCountry:this.comCountry.val,comEmail:this.comEmail.val,comStartTime:this.comStartTime.val,comEndTime:this.comEndTime.val};"old"===this.Mode&&(e.comId=this.ID),this.$emit("save-data",e)},deleteCompany(){this.$emit("delete-company",this.ID)},openEmployees(){localStorage.removeItem("depid"),this.$router.push("/employees/"+this.ID)},openWorkingTimes(){localStorage.removeItem("depidwt"),localStorage.removeItem("empidwt"),this.$router.push("/workingtimes/"+this.ID)}},computed:{editMode(){return this.editModeType},textForMode(){return!0===this.editModeType?"Save":"Edit"},calculationLink(){return`/calculations/${this.ID}`}},mounted(){this.editModeType="new"===this.Mode,"old"===this.Mode&&(this.$refs.comAddress.value=this.Address,this.$refs.comCity.value=this.City,this.$refs.comName.value=this.Name,this.$refs.comCountry.value=this.Country,this.$refs.comEmail.value=this.Email,this.$refs.comStartTime.value=this.StartTime,this.$refs.comEndTime.value=this.EndTime)}};const na=(0,ae.Z)(sa,[["render",ta],["__scopeId","data-v-6fdced5a"]]);var ra=na,la={components:{CompanyForm:ra},data(){return{error:null,isLoading:!1,EditMode:"new"}},methods:{handleError(){this.error=null},async saveData(e){this.isLoading=!0;try{await this.$store.dispatch("companies/addCompany",e),this.$router.push("/companies")}catch(t){this.error=t}this.isLoading=!1}}};const da=(0,ae.Z)(la,[["render",$t]]);var ma=da;const ca=(0,O._)("section",null,[(0,O._)("h2",{style:{"text-align":"center"}},"Add a new department")],-1),ua={key:0};function pa(e,t,a,i,o,s){const n=(0,O.up)("base-dialog"),r=(0,O.up)("base-spinner"),l=(0,O.up)("department-form");return(0,O.wg)(),(0,O.iD)("div",null,[ca,(0,O.Wm)(n,{show:!!o.error,title:"An error occured",onClose:e.handleError,showClose:!0},{default:(0,O.w5)((()=>[(0,O._)("p",null,(0,Tt.zw)(o.error),1)])),_:1},8,["show","onClose"]),o.isLoading?((0,O.wg)(),(0,O.iD)("div",ua,[(0,O.Wm)(r)])):(0,O.kq)("",!0),(0,O._)("section",null,[(0,O.Wm)(l,{onSaveData:s.saveData,Mode:this.EditMode},null,8,["onSaveData","Mode"])])])}const ha=e=>((0,O.dD)("data-v-0c91cc8c"),e=e(),(0,O.Cn)(),e),ya={key:0,class:"form-control"},wa=ha((()=>(0,O._)("label",{for:"ID"},"ID:",-1))),ga=["value"],fa=ha((()=>(0,O._)("label",{for:"Name"},"Name:",-1))),ka=["disabled"],va={key:1};function _a(e,t,a,o,s,n){const r=(0,O.up)("base-button"),l=(0,O.up)("base-card");return(0,O.wg)(),(0,O.iD)("div",null,[(0,O.Wm)(l,null,{default:(0,O.w5)((()=>[(0,O._)("form",{onSubmit:t[3]||(t[3]=(0,i.iM)((e=>n.submitForm()),["prevent"]))},["old"===this.Mode?((0,O.wg)(),(0,O.iD)("div",ya,[wa,(0,O._)("input",{type:"text",name:"ID",disabled:"",value:this.ID},null,8,ga)])):(0,O.kq)("",!0),(0,O._)("div",{class:(0,Tt.C_)(["form-control",{invalid:!s.depName.isValid}])},[fa,(0,O._)("input",{type:"text",name:"Name",disabled:!n.editMode,ref:"depName",onBlur:t[0]||(t[0]=e=>n.clearValidity("depName"))},null,40,ka)],2),s.formIsValid?(0,O.kq)("",!0):((0,O.wg)(),(0,O.iD)("p",va," Please, fix the above errors and submit again. ")),(0,O._)("div",null,[(0,O.Wm)(r,{style:{display:"inline"}},{default:(0,O.w5)((()=>[(0,O.Uk)((0,Tt.zw)(n.textForMode),1)])),_:1}),this.ID?((0,O.wg)(),(0,O.j4)(r,{key:0,link:"",style:{display:"inline"},to:`/employees/${this.comid}/${this.ID}`},{default:(0,O.w5)((()=>[(0,O.Uk)("Employees")])),_:1},8,["to"])):(0,O.kq)("",!0),this.ID?((0,O.wg)(),(0,O.j4)(r,{key:1,onClick:t[1]||(t[1]=e=>n.openWorkingTimes()),style:{display:"inline"},to:`/workingtimes/${this.comid}/${this.ID}`},{default:(0,O.w5)((()=>[(0,O.Uk)("Working times")])),_:1},8,["to"])):(0,O.kq)("",!0),this.ID?((0,O.wg)(),(0,O.j4)(r,{key:2,type:"button",onClick:t[2]||(t[2]=e=>n.deleteDepartment()),style:{display:"inline"}},{default:(0,O.w5)((()=>[(0,O.Uk)("Delete this department")])),_:1})):(0,O.kq)("",!0)])],32)])),_:1})])}var Da={props:["ID","Name","Mode"],emits:["save-data","delete-department"],data(){return{editModeType:!0,formIsValid:!0,comid:null,depName:{isValid:!0,val:""}}},methods:{clearValidity(e){this[e].isValid=!0},validateForm(){this.formIsValid=!0,""===this.depName.val&&(this.depName.isValid=!1,this.formIsValid=!1)},submitForm(){if(!this.editModeType)return void(this.editModeType=!0);if(this.depName.val=this.$refs.depName.value.trim(),this.validateForm(),!this.formIsValid)return;const e={depName:this.depName.val,comId:this.comid};"old"===this.Mode&&(e.depId=this.ID),this.$emit("save-data",e)},openWorkingTimes(){localStorage.removeItem("comidwt"),localStorage.removeItem("empidwt"),this.$router.push(`/workingtimes/${this.comid}/${this.ID}`)},deleteDepartment(){this.$emit("delete-department",this.ID)}},computed:{editMode(){return this.editModeType},textForMode(){return!0===this.editModeType?"Save":"Edit"}},created(){this.comid=localStorage.getItem("comid")},mounted(){this.editModeType="new"===this.Mode,"old"===this.Mode&&(this.$refs.depName.value=this.Name)}};const ba=(0,ae.Z)(Da,[["render",_a],["__scopeId","data-v-0c91cc8c"]]);var Ea=ba,Ia={components:{DepartmentForm:Ea},data(){return{error:null,isLoading:!1,EditMode:"new"}},methods:{async saveData(e){this.isLoading=!0;try{await this.$store.dispatch("departments/addDepartment",e),this.$router.push(`/departments/${localStorage.getItem("comid")}`)}catch(t){this.error=t}this.isLoading=!1}}};const Ta=(0,ae.Z)(Ia,[["render",pa]]);var Ca=Ta;const Sa=(0,O._)("section",null,[(0,O._)("h2",{style:{"text-align":"center"}},"Add a new employee")],-1),$a={key:0};function ja(e,t,a,i,o,s){const n=(0,O.up)("base-dialog"),r=(0,O.up)("base-spinner"),l=(0,O.up)("employee-form");return(0,O.wg)(),(0,O.iD)("div",null,[Sa,(0,O.Wm)(n,{show:!!o.error,title:"An error occured",onClose:s.handleError,showClose:!0},{default:(0,O.w5)((()=>[(0,O._)("p",null,(0,Tt.zw)(o.error),1)])),_:1},8,["show","onClose"]),o.isLoading?((0,O.wg)(),(0,O.iD)("div",$a,[(0,O.Wm)(r)])):(0,O.kq)("",!0),(0,O._)("section",null,[(0,O.Wm)(l,{onSaveData:s.saveData,Mode:this.EditMode},null,8,["onSaveData","Mode"])])])}const Va=e=>((0,O.dD)("data-v-2d5a913c"),e=e(),(0,O.Cn)(),e),Na={key:0,class:"form-control"},Aa=Va((()=>(0,O._)("label",{for:"ID"},"ID:",-1))),Wa=["value"],Ua=Va((()=>(0,O._)("label",{for:"Firstame"},"First name:",-1))),Fa=["disabled"],La={key:1,class:"invalid"},Ma=Va((()=>(0,O._)("label",{for:"LastName"},"Last name:",-1))),Pa=["disabled"],Oa={key:2,class:"invalid"},za=Va((()=>(0,O._)("label",{for:"JobTitle"},"Job title:",-1))),qa=["disabled"],Ba={key:3,class:"invalid"},xa=Va((()=>(0,O._)("label",{for:"Degree"},"Degree:",-1))),Ya=["disabled"],Ra={key:4,class:"invalid"},Ha=Va((()=>(0,O._)("label",{for:"DepartmentId"},"Department:",-1))),Za=["disabled"],Ja=["value","selected"],Ga=Va((()=>(0,O._)("label",{for:"Email"},"Email:",-1))),Ka=["disabled"],Qa=Va((()=>(0,O._)("label",{for:"Address"},"Address:",-1))),Xa=["disabled"],ei={key:5,class:"invalid"},ti={key:6,class:"invalid"},ai=Va((()=>(0,O._)("label",{for:"Phone"},"Phone:",-1))),ii=["disabled"],oi={key:7,class:"invalid"},si=Va((()=>(0,O._)("label",{for:"DateOfBirth"},"Date of birth:",-1))),ni=["disabled"],ri={key:8},li=Va((()=>(0,O._)("label",{for:"StartOfEmployment"},"Start of employment:",-1))),di=["disabled"],mi={key:9},ci=Va((()=>(0,O._)("label",{for:"HourlyRate"},"Hourly rate ($):",-1))),ui=["disabled"],pi={key:10};function hi(e,t,a,o,s,n){const r=(0,O.up)("base-button"),l=(0,O.up)("base-card");return(0,O.wg)(),(0,O.iD)("div",null,[(0,O.Wm)(l,null,{default:(0,O.w5)((()=>[(0,O._)("form",{onSubmit:t[12]||(t[12]=(0,i.iM)((e=>n.submitForm()),["prevent"]))},["old"===this.Mode?((0,O.wg)(),(0,O.iD)("div",Na,[Aa,(0,O._)("input",{type:"text",name:"ID",disabled:"",value:this.ID},null,8,Wa)])):(0,O.kq)("",!0),(0,O._)("div",{class:(0,Tt.C_)(["form-control",{invalid:!s.empFirstName.isValid}])},[Ua,(0,O._)("input",{type:"text",name:"FirstName",disabled:!n.editMode,ref:"empFirstName",onBlur:t[0]||(t[0]=e=>n.clearValidity("empFirstName"))},null,40,Fa)],2),s.empFirstName.isValid?(0,O.kq)("",!0):((0,O.wg)(),(0,O.iD)("p",La," First name cannot be empty, must contain only letters, but it is allowed to use dashes (like in Marc-Anthony), or single quotes (like in O'Neal). ")),(0,O._)("div",{class:(0,Tt.C_)(["form-control",{invalid:!s.empLastName.isValid}])},[Ma,(0,O._)("input",{type:"text",name:"LastName",disabled:!n.editMode,ref:"empLastName",onBlur:t[1]||(t[1]=e=>n.clearValidity("empLastName"))},null,40,Pa)],2),s.empLastName.isValid?(0,O.kq)("",!0):((0,O.wg)(),(0,O.iD)("p",Oa," Last name cannot be empty, must contain only letters, but it is allowed to use dashes (like in Schwartz-Muller), or single quotes (like in O'Brian). ")),(0,O._)("div",{class:(0,Tt.C_)(["form-control",{invalid:!s.empJobTitle.isValid}])},[za,(0,O._)("input",{type:"text",name:"JobTitle",disabled:!n.editMode,ref:"empJobTitle",onBlur:t[2]||(t[2]=e=>n.clearValidity("empJobTitle"))},null,40,qa)],2),s.empJobTitle.isValid?(0,O.kq)("",!0):((0,O.wg)(),(0,O.iD)("p",Ba," Job title cannot be empty, must contain only letters, but it is allowed to use dashes or single quotes. ")),(0,O._)("div",{class:(0,Tt.C_)(["form-control",{invalid:!s.empDegree.isValid}])},[xa,(0,O._)("input",{type:"text",name:"Degree",disabled:!n.editMode,ref:"empDegree",onBlur:t[3]||(t[3]=e=>n.clearValidity("empDegree"))},null,40,Ya)],2),s.empDegree.isValid?(0,O.kq)("",!0):((0,O.wg)(),(0,O.iD)("p",Ra," Degree cannot be empty, must contain only letters, but it is allowed to use dashes or single quotes. ")),(0,O._)("div",{class:(0,Tt.C_)(["form-control",{invalid:!s.empDepartmentId.isValid}])},[Ha,(0,O._)("select",{name:"DepartmentId",id:"DepartmentId",disabled:!n.editMode,ref:"empDepartmentId",onBlur:t[4]||(t[4]=e=>n.clearValidity("empDepartmentId"))},[((0,O.wg)(!0),(0,O.iD)(O.HY,null,(0,O.Ko)(n.departments,(e=>((0,O.wg)(),(0,O.iD)("option",{key:e.ID,value:e.ID,selected:n.depId===e.ID},(0,Tt.zw)(e.Name),9,Ja)))),128))],40,Za)],2),(0,O._)("div",{class:(0,Tt.C_)(["form-control",{invalid:!s.empEmail.isValid}])},[Ga,(0,O._)("input",{type:"text",name:"Email",disabled:!n.editMode,ref:"empEmail",onBlur:t[5]||(t[5]=e=>n.clearValidity("empEmail"))},null,40,Ka)],2),(0,O._)("div",{class:(0,Tt.C_)(["form-control",{invalid:!s.empAddress.isValid}])},[Qa,(0,O._)("input",{type:"text",name:"Address",disabled:!n.editMode,ref:"empAddress",onBlur:t[6]||(t[6]=e=>n.clearValidity("empAddress"))},null,40,Xa)],2),"new"!==this.Mode||s.empEmail.isValid?(0,O.kq)("",!0):((0,O.wg)(),(0,O.iD)("p",ei," Email and its corresponding confirmation field must match and be valid email addresses. ")),"old"!==this.Mode||s.empEmail.isValid?(0,O.kq)("",!0):((0,O.wg)(),(0,O.iD)("p",ti," Both old and new emails must be valid email addresses. ")),(0,O._)("div",{class:(0,Tt.C_)(["form-control",{invalid:!s.empPhone.isValid}])},[ai,(0,O._)("input",{type:"text",name:"Phone",disabled:!n.editMode,ref:"empPhone",onBlur:t[7]||(t[7]=e=>n.clearValidity("empPhone"))},null,40,ii)],2),s.empPhone.isValid?(0,O.kq)("",!0):((0,O.wg)(),(0,O.iD)("p",oi," Phone number must be in +999999999 or 099999999 format. ")),(0,O._)("div",{class:(0,Tt.C_)(["form-control",{invalid:!s.empDateOfBirth.isValid}])},[si,(0,O._)("input",{type:"text",name:"DateOfBirth",disabled:!n.editMode,ref:"empDateOfBirth",onBlur:t[8]||(t[8]=e=>n.clearValidity("empDateOfBirth"))},null,40,ni)],2),s.empDateOfBirth.isValid?(0,O.kq)("",!0):((0,O.wg)(),(0,O.iD)("p",ri," The only available format is DD.MM.YYY! You must use that one! ")),(0,O._)("div",{class:(0,Tt.C_)(["form-control",{invalid:!s.empStartOfEmployment.isValid}])},[li,(0,O._)("input",{type:"text",name:"StartOfEmployment",disabled:!n.editMode,ref:"empStartOfEmployment",onBlur:t[9]||(t[9]=e=>n.clearValidity("empStartOfEmployment"))},null,40,di)],2),s.empStartOfEmployment.isValid?(0,O.kq)("",!0):((0,O.wg)(),(0,O.iD)("p",mi," The only available format is DD.MM.YYY! You must use that one! ")),(0,O._)("div",{class:(0,Tt.C_)(["form-control",{invalid:!s.empHourlyRate.isValid}])},[ci,(0,O._)("input",{type:"number",step:"0.01",name:"HourlyRate",disabled:!n.editMode,ref:"empHourlyRate",onBlur:t[10]||(t[10]=e=>n.clearValidity("empHourlyRate"))},null,40,ui)],2),s.formIsValid?(0,O.kq)("",!0):((0,O.wg)(),(0,O.iD)("p",pi," Please, fix the above errors and submit again. ")),(0,O._)("div",null,[(0,O.Wm)(r,{style:{display:"inline"}},{default:(0,O.w5)((()=>[(0,O.Uk)((0,Tt.zw)(n.textForMode),1)])),_:1}),this.ID?((0,O.wg)(),(0,O.j4)(r,{key:0,onClick:t[11]||(t[11]=e=>n.openWorkingTimes()),style:{display:"inline"},to:`/workingtimes/${this.ID}`},{default:(0,O.w5)((()=>[(0,O.Uk)("Working times")])),_:1},8,["to"])):(0,O.kq)("",!0),(0,O.Wm)(r,{type:"button",onClick:n.deleteEmployee,style:{display:"inline"}},{default:(0,O.w5)((()=>[(0,O.Uk)("Delete this employee")])),_:1},8,["onClick"])])],32)])),_:1})])}var yi={emits:["save-data","delete-employee"],props:["ID","FirstName","LastName","Degree","JobTitle","HourlyRate","Department","DepartmentId","Email","Address","Phone","DateOfBirth","StartOfEmployment","Mode"],data(){return{editModeType:!0,formIsValid:!0,depid:null,empFirstName:{isValid:!0,val:""},empLastName:{isValid:!0,val:""},empDegree:{isValid:!0,val:""},empJobTitle:{isValid:!0,val:""},empHourlyRate:{isValid:!0,val:0},empDepartmentId:{isValid:!0,val:""},empEmail:{isValid:!0,val:""},empAddress:{isValid:!0,val:""},empPhone:{isValid:!0,val:""},empDateOfBirth:{isValid:!0,val:""},empStartOfEmployment:{isValid:!0,val:""}}},methods:{handleError(){this.error=null},clearValidity(e){this[e].isValid=!0},submitForm(){if(!this.editModeType)return void(this.editModeType=!0);if(this.empAddress.val=this.$refs.empAddress.value.trim(),this.empDateOfBirth.val=this.$refs.empDateOfBirth.value,this.empDegree.val=this.$refs.empDegree.value.trim(),this.empDepartmentId.val=this.$refs.empDepartmentId.value,this.empEmail.val=this.$refs.empEmail.value.trim(),this.empFirstName.val=this.$refs.empFirstName.value.trim(),this.empHourlyRate.val=this.$refs.empHourlyRate.value,this.empJobTitle.val=this.$refs.empJobTitle.value.trim(),this.empLastName.val=this.$refs.empLastName.value.trim(),this.empPhone.val=this.$refs.empPhone.value.trim(),this.empStartOfEmployment.val=this.$refs.empStartOfEmployment.value,this.validateForm(),!this.formIsValid)return;const e={empAddress:this.empAddress.val,empEmail:this.empEmail.val,empDateOfBirth:this.empDateOfBirth.val,empDegree:this.empDegree.val,empDepartmentId:this.empDepartmentId.val,empFirstName:this.empFirstName.val,empHourlyRate:parseFloat(this.empHourlyRate.val),empJobTitle:this.empJobTitle.val,empLastName:this.empLastName.val,empPhone:this.empPhone.val,empStartOfEmployment:this.empStartOfEmployment.val};"old"===this.Mode&&(e.empId=this.ID),this.$emit("save-data",e)},validateForm(){this.formIsValid=!0,oa.checkPersonName(this.empFirstName.val)||(this.empFirstName.isValid=!1,this.formIsValid=!1),oa.checkPersonName(this.empLastName.val)||(this.empLastName.isValid=!1,this.formIsValid=!1),oa.checkPersonName(this.empJobTitle.val)||(this.empJobTitle.isValid=!1,this.formIsValid=!1),oa.checkEmail(this.empEmail.val)||(this.empEmail.isValid=!1,this.formIsValid=!1),this.empAddress.val.length<5&&(this.empAddress.isValid=!1,this.formIsValid=!1),""!==this.empDateOfBirth.val&&oa.checkDate(this.empDateOfBirth.val)||(this.empDateOfBirth.isValid=!1,this.formIsValid=!1),oa.checkDegree(this.empDegree.val)||(this.empDegree.isValid=!1,this.formIsValid=!1),(isNaN(parseFloat(this.empHourlyRate.val))||parseFloat(this.empHourlyRate.val)<=0)&&(this.empHourlyRate.isValid=!1,this.formIsValid=!1),oa.checkPhone(this.empPhone.val)||(this.empPhone.isValid=!1,this.formIsValid=!1),""!==this.empStartOfEmployment.val&&oa.checkDate(this.empStartOfEmployment.val)||(this.empStartOfEmployment.isValid=!1,this.formIsValid=!1)},async loadDepartments(){try{await this.$store.dispatch("departments/loadDepartments",{comid:localStorage.getItem("comid")})}catch(e){this.error=`${e.message} in getting departments`||"Something went wrong!"}},openWorkingTimes(){localStorage.removeItem("comidwt"),localStorage.removeItem("depidwt"),this.$router.push("/workingtimes/"+this.empid)},deleteEmployee(){this.$emit("delete-employee",this.ID)}},computed:{editMode(){return this.editModeType},textForMode(){return!0===this.editModeType?"Save":"Edit"},departments(){return this.$store.getters["departments/departments"]},depId(){return this.DepartmentId}},async created(){await this.loadDepartments(),this.comid=localStorage.getItem("comid"),this.empid=localStorage.getItem("empid"),this.depid=localStorage.getItem("depid")},mounted(){this.editModeType="new"===this.Mode,"old"===this.Mode&&(this.$refs.empAddress.value=this.Address,this.$refs.empDateOfBirth.value=ia()(this.DateOfBirth).format("DD.MM.YYYY"),this.$refs.empDegree.value=this.Degree,this.$refs.empDepartmentId.value=this.DepartmentId,this.$refs.empEmail.value=this.Email,this.$refs.empFirstName.value=this.FirstName,this.$refs.empHourlyRate.value=this.HourlyRate,this.$refs.empJobTitle.value=this.JobTitle,this.$refs.empLastName.value=this.LastName,this.$refs.empPhone.value=this.Phone,this.$refs.empStartOfEmployment.value=ia()(this.StartOfEmployment).format("DD.MM.YYYY"))}};const wi=(0,ae.Z)(yi,[["render",hi],["__scopeId","data-v-2d5a913c"]]);var gi=wi,fi={components:{EmployeeForm:gi},data(){return{error:null,isLoading:!1,EditMode:"new"}},methods:{handleError(){this.error=null},async saveData(e){try{await this.$store.dispatch("employees/addEmployee",e),this.$router.push(`/employees/ + ${localStorage.getItem("comid")}`)}catch(t){this.error=t}}}};const ki=(0,ae.Z)(fi,[["render",ja]]);var vi=ki;function _i(e,t,a,i,o,s){const n=(0,O.up)("user-form"),r=(0,O.up)("base-card");return(0,O.wg)(),(0,O.iD)("div",null,[(0,O.Wm)(r,null,{default:(0,O.w5)((()=>[(0,O.Wm)(n,{Mode:"new"})])),_:1})])}const Di=e=>((0,O.dD)("data-v-72ea9e79"),e=e(),(0,O.Cn)(),e),bi={key:0},Ei=Di((()=>(0,O._)("label",{for:"FirstName"},"First name",-1))),Ii={key:0,class:"invalid"},Ti=Di((()=>(0,O._)("label",{for:"LastName"},"Last name",-1))),Ci={key:1,class:"invalid"},Si={key:0,for:"Email"},$i={key:1,for:"Email"},ji={key:0,for:"EmailConfirm"},Vi={key:1,for:"EmailConfirm"},Ni={key:2,class:"invalid"},Ai={key:3,class:"invalid"},Wi={key:0,for:"Password"},Ui={key:1,for:"Password"},Fi={key:0,for:"PasswordConfirm"},Li={key:1,for:"PasswordConfirm"},Mi={key:4,class:"invalid"},Pi={key:5,class:"invalid"},Oi={key:6,class:"invalid"},zi={key:7},qi={class:"form-control"};function Bi(e,t,a,o,s,n){const r=(0,O.up)("base-dialog"),l=(0,O.up)("base-spinner"),d=(0,O.up)("base-button");return(0,O.wg)(),(0,O.iD)("div",null,[(0,O.Wm)(r,{show:!!s.error,title:"An error occured",showClose:!0,onClose:n.handleError},{default:(0,O.w5)((()=>[(0,O._)("p",null,(0,Tt.zw)(s.error),1)])),_:1},8,["show","onClose"]),s.isLoading?((0,O.wg)(),(0,O.iD)("div",bi,[(0,O.Wm)(l)])):(0,O.kq)("",!0),((0,O.wg)(),(0,O.j4)(O.Ob,null,[(0,O._)("form",{onSubmit:t[6]||(t[6]=(0,i.iM)((e=>n.submitForm()),["prevent"]))},[(0,O._)("div",{class:(0,Tt.C_)(["form-control",{invalid:!s.uFirstName.isValid}])},[Ei,(0,O._)("input",{type:"text",name:"FirstName",id:"FirstName",ref:"FirstName",onBlur:t[0]||(t[0]=e=>n.clearValidity("uFirstName"))},null,544)],2),s.uFirstName.isValid?(0,O.kq)("",!0):((0,O.wg)(),(0,O.iD)("p",Ii," First name cannot be empty, must contain only letters, but it is allowed to use dashes (like in Marc-Anthony), or single quotes (like in O'Neal). ")),(0,O._)("div",{class:(0,Tt.C_)(["form-control",{invalid:!s.uLastName.isValid}])},[Ti,(0,O._)("input",{type:"text",name:"LastName",id:"LastName",ref:"LastName",onBlur:t[1]||(t[1]=e=>n.clearValidity("uLastName"))},null,544)],2),s.uLastName.isValid?(0,O.kq)("",!0):((0,O.wg)(),(0,O.iD)("p",Ci," Last name cannot be empty, must contain only letters, but it is allowed to use dashes (like in Schwartz-Muller), or single quotes (like in O'Brian). ")),(0,O._)("div",{class:(0,Tt.C_)(["form-control",{invalid:!s.uEmail.isValid}])},["new"===this.Mode?((0,O.wg)(),(0,O.iD)("label",Si,"Email")):(0,O.kq)("",!0),"old"===this.Mode?((0,O.wg)(),(0,O.iD)("label",$i,"Old email")):(0,O.kq)("",!0),(0,O._)("input",{type:"email",name:"Email",id:"Email",ref:"Email",onBlur:t[2]||(t[2]=e=>n.clearValidity("uEmail"))},null,544)],2),(0,O._)("div",{class:(0,Tt.C_)(["form-control",{invalid:!s.uEmailConfirm.isValid}])},["new"===this.Mode?((0,O.wg)(),(0,O.iD)("label",ji,"Email confirmation")):(0,O.kq)("",!0),"old"===this.Mode?((0,O.wg)(),(0,O.iD)("label",Vi,"New email")):(0,O.kq)("",!0),(0,O._)("input",{type:"email",name:"EmailConfirm",id:"EmailConfirm",ref:"EmailConfirm",onBlur:t[3]||(t[3]=e=>n.clearValidity("uEmailConfirm"))},null,544)],2),"new"!==this.Mode||s.uEmail.isValid&&s.uEmailConfirm.isValid?(0,O.kq)("",!0):((0,O.wg)(),(0,O.iD)("p",Ni," Email and its corresponding confirmation field must match and be valid email addresses. ")),"old"!==this.Mode||s.uEmail.isValid&&s.uEmailConfirm.isValid?(0,O.kq)("",!0):((0,O.wg)(),(0,O.iD)("p",Ai," Both old and new emails must be valid email addresses. ")),(0,O._)("div",{class:(0,Tt.C_)(["form-control",{invalid:!s.uPassword.isValid}])},["new"===this.Mode?((0,O.wg)(),(0,O.iD)("label",Wi,"Password")):(0,O.kq)("",!0),"old"===this.Mode?((0,O.wg)(),(0,O.iD)("label",Ui,"Old password")):(0,O.kq)("",!0),(0,O._)("input",{type:"password",name:"Password",id:"Password",ref:"Password",onBlur:t[4]||(t[4]=e=>n.clearValidity("uPassword"))},null,544)],2),(0,O._)("div",{class:(0,Tt.C_)(["form-control",{invalid:!s.uPasswordConfirm.isValid}])},["new"===this.Mode?((0,O.wg)(),(0,O.iD)("label",Fi,"Password confirmation")):(0,O.kq)("",!0),"old"===this.Mode?((0,O.wg)(),(0,O.iD)("label",Li,"New password")):(0,O.kq)("",!0),(0,O._)("input",{type:"password",name:"PasswordConfirm",id:"PasswordConfirm",ref:"PasswordConfirm",onBlur:t[5]||(t[5]=e=>n.clearValidity("uPasswordConfirm"))},null,544)],2),"new"!==this.Mode||s.uPassword.isValid&&s.uPasswordConfirm.isValid?(0,O.kq)("",!0):((0,O.wg)(),(0,O.iD)("p",Mi," Password and its corresponding confirmation field must match and be at least 8 characters long, containing letters, numbers and at least one special sign. ")),"old"===this.Mode&&""===s.uPassword.val.trim()?((0,O.wg)(),(0,O.iD)("p",Pi," You must type in old password for the sake of verification. ")):"old"!==this.Mode||s.uPassword.isValid&&s.uPasswordConfirm.isValid?(0,O.kq)("",!0):((0,O.wg)(),(0,O.iD)("p",Oi," Both old and new passwords must be at least 8 characters long, containing letters, numbers and special signs. ")),s.formIsValid?(0,O.kq)("",!0):((0,O.wg)(),(0,O.iD)("p",zi,"Please, fix the above errors and submit again.")),(0,O._)("div",qi,[(0,O.Wm)(d,{style:{display:"inline"}},{default:(0,O.w5)((()=>[(0,O.Uk)("Save")])),_:1}),"old"===this.Mode?((0,O.wg)(),(0,O.j4)(d,{key:0,type:"button",style:{display:"inline"},onClick:n.deleteUser},{default:(0,O.w5)((()=>[(0,O.Uk)("Delete")])),_:1},8,["onClick"])):(0,O.kq)("",!0)])],32)],1024))])}var xi={props:["Mode","FirstName","LastName","Email"],data(){return{error:null,isLoading:!1,formIsValid:!0,uFirstName:{isValid:!0,val:""},uLastName:{isValid:!0,val:""},uEmail:{isValid:!0,val:""},uEmailConfirm:{isValid:!0,val:""},uPassword:{isValid:!0,val:""},uPasswordConfirm:{isValid:!0,val:""}}},methods:{handleError(){this.error=null},clearValidity(e){this[e].isValid=!0},deleteUser(){alert("to be done")},async submitForm(){this.isLoading=!0;try{if(this.uFirstName.val=this.$refs.FirstName.value,this.uLastName.val=this.$refs.LastName.value,this.uEmail.val=this.$refs.Email.value,this.uEmailConfirm.val=this.$refs.EmailConfirm.value,this.uPassword.val=this.$refs.Password.value,this.uPasswordConfirm.val=this.$refs.PasswordConfirm.value,this.validateForm(),!this.formIsValid)return void(this.isLoading=!1);const e={FirstName:this.uFirstName.val,LastName:this.uLastName.val};"old"===this.Mode?(e.Id=this.ID,e.OldEmail=this.uEmail.val,e.NewEmail=this.uEmailConfirm.val,e.NewEmailConfirmation=this.uEmailConfirm.val,e.OldPassword=this.uPassword.val,e.NewPassword=this.uPasswordConfirm.val,e.PasswordConfirmation=this.uPasswordConfirm.val,await this.$store.dispatch("auth/editUser",e),this.$router.push("/companies")):(e.FirstName=this.uFirstName.val,e.LastName=this.uLastName.val,e.Email=this.uEmail.val,e.Password=this.uPassword.val,e.Role="COMPANY MANAGER",await this.$store.dispatch("auth/register",e),this.$router.push("/login"))}catch(e){this.error=e}this.isLoading=!1},validateForm(){this.formIsValid=!0,oa.checkPersonName(this.uFirstName.val)||(this.uFirstName.isValid=!1,this.formIsValid=!1),oa.checkPersonName(this.uLastName.val)||(this.uLastName.isValid=!1,this.formIsValid=!1),"new"===this.Mode?oa.checkEmail(this.uEmail.val)&&this.uEmail.val===this.uEmailConfirm.val||(this.uEmail.isValid=!1,this.uEmailConfirm.isValid=!1,this.formIsValid=!1):(oa.checkEmail(this.uEmail.val)||(this.uEmail.isValid=!1,this.formIsValid=!1),""!==this.uEmailConfirm.val&&(oa.checkEmail(this.uEmailConfirm.val)||(this.uEmailConfirm.isValid=!1,this.formIsValid=!1))),"new"===this.Mode?oa.checkPassword(this.uPassword.val)&&this.uPassword.val===this.uPasswordConfirm.val||(this.uPassword.isValid=!1,this.uPasswordConfirm.isValid=!1,this.formIsValid=!1):(oa.checkPassword(this.uPassword.val)||(this.uPassword.isValid=!1,this.formIsValid=!1),""!==this.uPasswordConfirm.val&&(oa.checkPassword(this.uPasswordConfirm.val)||(this.uPasswordConfirm.isValid=!1,this.formIsValid=!1)))}},mounted(){"old"===this.Mode&&(this.$refs.FirstName.value=this.FirstName,this.$refs.LastName.value=this.LastName,this.$refs.Email.value=this.Email)}};const Yi=(0,ae.Z)(xi,[["render",Bi],["__scopeId","data-v-72ea9e79"]]);var Ri=Yi,Hi={components:{UserForm:Ri}};const Zi=(0,ae.Z)(Hi,[["render",_i]]);var Ji=Zi;function Gi(e,t){const a=(0,O.up)("base-button"),i=(0,O.up)("base-card");return(0,O.wg)(),(0,O.iD)("div",null,[(0,O.Wm)(i,{style:{"text-align":"center"}},{default:(0,O.w5)((()=>[(0,O.Wm)(a,{class:"authButtons",link:"",to:"/register"},{default:(0,O.w5)((()=>[(0,O.Uk)("Register")])),_:1}),(0,O.Wm)(a,{class:"authButtons",link:"",to:"/login"},{default:(0,O.w5)((()=>[(0,O.Uk)("Login")])),_:1})])),_:1})])}const Ki={},Qi=(0,ae.Z)(Ki,[["render",Gi],["__scopeId","data-v-e608ba48"]]);var Xi=Qi;const eo=e=>((0,O.dD)("data-v-d6048c02"),e=e(),(0,O.Cn)(),e),to=eo((()=>(0,O._)("label",{for:"wtDate"},"Date:",-1))),ao={key:0,class:"invalid"},io=eo((()=>(0,O._)("hr",null,null,-1))),oo=eo((()=>(0,O._)("thead",null,[(0,O._)("tr",null,[(0,O._)("th",null,"Full name"),(0,O._)("th",null,"Employee worked"),(0,O._)("th",null,"Start time"),(0,O._)("th",null,"End time")])],-1))),so={style:{"text-align":"left"}},no=["onUpdate:modelValue"],ro=["onUpdate:modelValue"],lo=["onUpdate:modelValue"],mo=eo((()=>(0,O._)("br",null,null,-1))),co=eo((()=>(0,O._)("br",null,null,-1))),uo={style:{"text-align":"center"}},po={key:1};function ho(e,t,a,o,s,n){const r=(0,O.up)("base-dialog"),l=(0,O.up)("base-button"),d=(0,O.up)("base-card");return(0,O.wg)(),(0,O.iD)("div",null,[(0,O.Wm)(r,{show:!!s.error,title:"An error occured",showClose:!0,onClose:n.handleError},{default:(0,O.w5)((()=>[(0,O._)("p",null,(0,Tt.zw)(s.error),1)])),_:1},8,["show","onClose"]),(0,O._)("section",null,[n.hasEmployees?((0,O.wg)(),(0,O.iD)("form",{key:0,onSubmit:t[2]||(t[2]=(0,i.iM)((e=>n.submitForm()),["prevent"]))},[(0,O.Wm)(d,{style:{"max-width":"50%"}},{default:(0,O.w5)((()=>[(0,O._)("div",null,[(0,O._)("div",{class:(0,Tt.C_)(["form-control",{invalid:!s.wtDate.isValid}])},[to,(0,O.wy)((0,O._)("input",{type:"text",name:"wtDate",onBlur:t[0]||(t[0]=e=>n.clearValidity("wtDate")),"onUpdate:modelValue":t[1]||(t[1]=e=>s.wtDate.val=e)},null,544),[[i.nr,s.wtDate.val]])],2),s.wtDate.isValid?(0,O.kq)("",!0):((0,O.wg)(),(0,O.iD)("p",ao," Date must be in a DD.MM.YYYY format. ")),io,(0,O._)("table",null,[oo,(0,O._)("tbody",null,[((0,O.wg)(!0),(0,O.iD)(O.HY,null,(0,O.Ko)(n.loadedEmployees,(e=>((0,O.wg)(),(0,O.iD)("tr",{key:e.id},[(0,O._)("td",so,(0,Tt.zw)(e.id+" - "+e.firstName+" "+e.lastName),1),(0,O._)("td",null,[(0,O.wy)((0,O._)("input",{type:"checkbox","onUpdate:modelValue":t=>e.didWork=t},null,8,no),[[i.e8,e.didWork]])]),(0,O._)("td",null,[(0,O.wy)((0,O._)("input",{type:"time",name:"WorkingTimeDate","onUpdate:modelValue":t=>e.startTime=t},null,8,ro),[[i.nr,e.startTime]])]),(0,O._)("td",null,[(0,O.wy)((0,O._)("input",{type:"time",name:"WorkingTimeDate","onUpdate:modelValue":t=>e.endTime=t},null,8,lo),[[i.nr,e.endTime]])])])))),128))])]),mo,co,(0,O._)("div",uo,[(0,O.Wm)(l,null,{default:(0,O.w5)((()=>[(0,O.Uk)("Save working times")])),_:1})])])])),_:1})],32)):((0,O.wg)(),(0,O.iD)("p",po,[(0,O.Wm)(d,null,{default:(0,O.w5)((()=>[(0,O.Uk)(" There are no employees here. There's probably some server side problem. We suggest you try again in a minute or so, or just go to the root of the application and start over. ")])),_:1})]))])])}var yo={data(){return{isValid:!0,error:null,wtDate:{isValid:!0,val:""},employees:[],company:{}}},async created(){const e=window.location.pathname.split("/").slice(2),t=2===e.length?`${e[0]}/${e[1]}?PageNumber=0&PageSize=10000`:`${e[0]}?PageNumber=0&PageSize=10000`;try{await this.$store.dispatch("employees/loadEmployees",{link:t}),this.employees=this.$store.getters["employees/employees"]}catch(a){return void(this.error=a)}try{await this.$store.dispatch("companies/loadCompany",{id:e[0]})}catch(a){return void(this.error=a)}this.wtDate.val=ia()((new Date).toLocaleDateString().substring(0,10)).format("DD.MM.YYYY"),this.company=this.$store.getters["companies/company"],this.employees=this.employees.map((e=>({id:e.ID,date:this.wtDate.val,firstName:e.FirstName,lastName:e.LastName,endTime:this.company.EndTime,startTime:this.company.StartTime,didWork:!0})))},computed:{loadedEmployees(){return this.employees},hasEmployees(){return this.$store.getters["employees/hasEmployees"]},workingDate(){return this.wtDate}},methods:{handleError(){this.error=null},clearValidity(e){this[e].isValid=!0},validate(){this.formIsValid=!0,""!==this.wtDate.val&&ia()(this.wtDate.val,"DD.MM.YYYY",!0).isValid()||(this.wtDate.isValid=!1,this.formIsValid=!1)},async submitForm(){if(this.validate(),this.formIsValid)try{this.employees.forEach((e=>e.date=this.wtDate.val)),await this.$store.dispatch("workingTimes/addWorkingTimes",{employees:this.employees}),this.$router.push(`/workingtimes/${this.company.ID}`)}catch(e){this.error=e}}}};const wo=(0,ae.Z)(yo,[["render",ho],["__scopeId","data-v-d6048c02"]]);var go=wo;const fo={class:"controls"},ko={key:0},vo={key:1},_o={key:2};function Do(e,t,a,i,o,s){const n=(0,O.up)("base-dialog"),r=(0,O.up)("base-button"),l=(0,O.up)("base-spinner"),d=(0,O.up)("company-item"),m=(0,O.up)("router-link"),c=(0,O.up)("base-card");return(0,O.wg)(),(0,O.iD)("div",null,[(0,O.Wm)(n,{show:!!o.error,title:"An error occured",showClose:!0,onClose:s.handleError},{default:(0,O.w5)((()=>[(0,O._)("p",null,(0,Tt.zw)(o.error),1)])),_:1},8,["show","onClose"]),(0,O._)("section",null,[(0,O.Wm)(c,null,{default:(0,O.w5)((()=>[(0,O._)("div",fo,[(0,O.Wm)(r,{onClick:s.refresh},{default:(0,O.w5)((()=>[(0,O.Uk)("Refresh")])),_:1},8,["onClick"]),s.hasCompanies?((0,O.wg)(),(0,O.j4)(r,{key:0,link:"",to:"/addcompany"},{default:(0,O.w5)((()=>[(0,O.Uk)("Add company")])),_:1})):(0,O.kq)("",!0)]),o.isLoading?((0,O.wg)(),(0,O.iD)("div",ko,[(0,O.Wm)(l)])):s.hasCompanies?((0,O.wg)(),(0,O.iD)("ul",vo,[((0,O.wg)(!0),(0,O.iD)(O.HY,null,(0,O.Ko)(s.filteredCompanies,(e=>((0,O.wg)(),(0,O.j4)(d,{key:e.ID,ID:e.ID,Name:e.Name,Address:e.Address,City:e.City,Country:e.Country,Email:e.Email,StartTime:e.StartTime,EndTime:e.EndTime},null,8,["ID","Name","Address","City","Country","Email","StartTime","EndTime"])))),128))])):o.isLoading?(0,O.kq)("",!0):((0,O.wg)(),(0,O.iD)("h3",_o,[(0,O.Uk)(" There are no companies for this user. "),(0,O.Wm)(m,{to:"/addcompany"},{default:(0,O.w5)((()=>[(0,O.Uk)("Add one!")])),_:1})]))])),_:1})])])}const bo={class:"actions"};function Eo(e,t,a,i,o,s){const n=(0,O.up)("base-button");return(0,O.wg)(),(0,O.iD)("li",null,[(0,O._)("h3",null,(0,Tt.zw)(a.ID)+" - "+(0,Tt.zw)(a.Name),1),(0,O._)("h4",null,(0,Tt.zw)(s.fullAddress),1),(0,O._)("h4",null,[(0,O._)("b",null,(0,Tt.zw)(a.Email),1)]),(0,O._)("h4",null,(0,Tt.zw)(a.StartTime)+" - "+(0,Tt.zw)(a.EndTime),1),(0,O._)("div",bo,[(0,O.Wm)(n,{link:"",to:s.detailsLink},{default:(0,O.w5)((()=>[(0,O.Uk)("Details")])),_:1},8,["to"])])])}var Io={props:["ID","Name","Address","City","Country","Email","StartTime","EndTime"],computed:{fullAddress(){return`${this.Address}, ${this.City}, ${this.Country}`},detailsLink(){return`${this.$route.path}/${this.ID}`}}};const To=(0,ae.Z)(Io,[["render",Eo],["__scopeId","data-v-7eafa909"]]);var Co=To,So={data(){return{isLoading:!1,error:null}},components:{CompanyItem:Co},computed:{filteredCompanies(){return this.$store.getters["companies/companies"]},hasCompanies(){return!this.isLoading&&this.$store.getters["companies/hasCompanies"]}},methods:{async loadCompanies(){this.isLoading=!0;try{await this.$store.dispatch("companies/loadCompanies")}catch(e){this.error=`${e.message} in getting companies.`||"Something went wrong!"}this.isLoading=!1},async refresh(){await this.loadCompanies()},handleError(){this.error=null}},async created(){await this.loadCompanies(),d()}};const $o=(0,ae.Z)(So,[["render",Do],["__scopeId","data-v-12001a02"]]);var jo=$o;const Vo={key:0},No=(0,O._)("h3",null,"There are some problems with loading of this company.",-1);function Ao(e,t,a,i,o,s){const n=(0,O.up)("base-dialog"),r=(0,O.up)("base-spinner"),l=(0,O.up)("company-form"),d=(0,O.up)("base-card"),m=(0,O.up)("company-delete-options");return(0,O.wg)(),(0,O.iD)("div",null,[(0,O.Wm)(n,{show:!!o.error,title:"An error occured",onClose:s.handleError,showClose:!0},{default:(0,O.w5)((()=>[(0,O._)("p",null,(0,Tt.zw)(o.error),1)])),_:1},8,["show","onClose"]),o.isLoading?((0,O.wg)(),(0,O.iD)("div",Vo,[(0,O.Wm)(r)])):(0,O.kq)("",!0),s.hasCompany?((0,O.wg)(),(0,O.j4)(l,{onSaveData:s.saveData,onDeleteCompany:s.deleteCompany,key:s.company.ID,ID:s.company.ID,Name:s.company.Name,Address:s.company.Address,City:s.company.City,Country:s.company.Country,Email:s.company.Email,Mode:this.EditMode,StartTime:s.company.StartTime,EndTime:s.company.EndTime},null,8,["onSaveData","onDeleteCompany","ID","Name","Address","City","Country","Email","Mode","StartTime","EndTime"])):o.isLoading?(0,O.kq)("",!0):((0,O.wg)(),(0,O.j4)(d,{key:2},{default:(0,O.w5)((()=>[No])),_:1})),(0,O.Wm)(n,{showClose:!1,fixed:"",title:"Select some delete options",show:o.deleting},{default:(0,O.w5)((()=>[(0,O.Wm)(m,{onCancel:s.cancelDeletion},null,8,["onCancel"])])),_:1},8,["show"])])}const Wo=e=>((0,O.dD)("data-v-2842ba8d"),e=e(),(0,O.Cn)(),e),Uo=Wo((()=>(0,O._)("p",{style:{"text-align":"justify"}}," Would you like to delete all of the employees from this company? If you choose YES, all of the employees and their working times will be deleted. ",-1))),Fo={class:"form-control"},Lo=Wo((()=>(0,O._)("label",{for:"deleteAll"},"Delete all employees:",-1))),Mo=Wo((()=>(0,O._)("option",{value:"0",selected:""},"NO",-1))),Po=Wo((()=>(0,O._)("option",{value:"1"},"YES",-1))),Oo=[Mo,Po],zo={key:0},qo=Wo((()=>(0,O._)("p",{style:{"text-align":"justify"}}," Select the company you would like to transfer employees of deleting company. ",-1))),Bo={class:"form-control"},xo=Wo((()=>(0,O._)("label",{for:"companyId"},"Select company:",-1))),Yo=Wo((()=>(0,O._)("option",{value:"0"},"None. Just leave them unemployed.",-1))),Ro=["value"],Ho={key:1},Zo=Wo((()=>(0,O._)("p",{style:{"text-align":"justify"}}," Select the department of the company you would like to transfer employees of deleting company. ",-1))),Jo={class:"form-control"},Go=Wo((()=>(0,O._)("label",{for:"companyId"},"Select department:",-1))),Ko=["value"],Qo={key:1},Xo={class:"form-control"};function es(e,t,a,o,s,n){const r=(0,O.up)("base-button");return(0,O.wg)(),(0,O.iD)(O.HY,null,[(0,O._)("div",null,[Uo,(0,O._)("div",Fo,[Lo,(0,O.wy)((0,O._)("select",{name:"deleteAll",id:"deleteAll","onUpdate:modelValue":t[0]||(t[0]=e=>s.delSelected=e)},Oo,512),[[i.bM,s.delSelected]])])]),n.delSel>0?(0,O.kq)("",!0):((0,O.wg)(),(0,O.iD)("div",zo,[qo,(0,O._)("div",Bo,[xo,(0,O.wy)((0,O._)("select",{name:"companyId","onUpdate:modelValue":t[1]||(t[1]=e=>s.comId=e),id:"companyId"},[Yo,((0,O.wg)(!0),(0,O.iD)(O.HY,null,(0,O.Ko)(n.companies,(e=>((0,O.wg)(),(0,O.iD)("option",{key:e.ID,value:e.ID},(0,Tt.zw)(e.Name),9,Ro)))),128))],512),[[i.bM,s.comId]])])])),n.comSel>0?((0,O.wg)(),(0,O.iD)("div",Ho,[Zo,(0,O._)("div",Jo,[Go,s.loadedDepartments.length>0?(0,O.wy)(((0,O.wg)(),(0,O.iD)("select",{key:0,name:"departmentId","onUpdate:modelValue":t[2]||(t[2]=e=>s.depId=e),id:"departmentId"},[((0,O.wg)(!0),(0,O.iD)(O.HY,null,(0,O.Ko)(n.departments,(e=>((0,O.wg)(),(0,O.iD)("option",{key:e.ID,value:e.ID},(0,Tt.zw)(e.Name),9,Ko)))),128))],512)),[[i.bM,s.depId]]):((0,O.wg)(),(0,O.iD)("p",Qo," There are no departments to choose from. Either add some departments to the selected company, or delete all the employees. "))])])):(0,O.kq)("",!0),(0,O._)("div",Xo,[(0,O.Wm)(r,{style:{display:"inline"},onClick:n.deleteCompany},{default:(0,O.w5)((()=>[(0,O.Uk)("Delete")])),_:1},8,["onClick"]),(0,O.Wm)(r,{style:{display:"inline"},onClick:n.cancel},{default:(0,O.w5)((()=>[(0,O.Uk)("Cancel")])),_:1},8,["onClick"])])],64)}var ts=a(4870),as={emits:["cancel"],data(){return{comId:(0,ts.iH)("0"),delSelected:(0,ts.iH)("1"),loadedCompanies:[],depId:(0,ts.iH)(""),loadedDepartments:[]}},computed:{delSel(){return this.delSelected},comSel(){return this.comId},companies(){return this.loadedCompanies},departments(){return this.loadedDepartments}},watch:{async delSelected(){0==this.delSelected&&await this.loadCompanies()},async comId(){0!=this.comId&&await this.loadDepartments()}},methods:{async deleteCompany(){const e={id:parseInt(localStorage.getItem("comid")),targetDepartmentId:""!=this.depId?this.depId:0,deleteEmployees:0!=this.delSelected};try{await this.$store.dispatch("companies/deleteCompany",e),this.$router.push("/companies")}catch(t){this.error=`${t.message} in deleting company.`||"Something went wrong!"}},cancel(){this.$emit("cancel")},async loadCompanies(){try{this.$store.getters["companies/hasCompanies"]||await this.$store.dispatch("companies/loadCompanies")}catch(e){this.error=`${e.message} in getting companies.`||"Something went wrong!"}this.loadedCompanies=this.$store.getters["companies/companies"].filter((e=>+e.ID!==parseInt(localStorage.getItem("comid"))))},async loadDepartments(){try{await this.$store.dispatch("departments/loadDepartments",{comid:this.comId})}catch(e){this.error=`${e.message} in getting epartments.`||"Something went wrong!"}this.loadedDepartments=this.$store.getters["departments/departments"]}}};const is=(0,ae.Z)(as,[["render",es],["__scopeId","data-v-2842ba8d"]]);var os=is,ss={components:{CompanyForm:ra,CompanyDeleteOptions:os},props:["comid"],data(){return{isLoading:!1,deleting:!1,error:null,mode:!0,EditMode:"old"}},methods:{async saveData(e){this.isLoading=!0;try{await this.$store.dispatch("companies/editCompany",e),this.$router.push("/companies")}catch(t){this.error=t}this.isLoading=!1},cancelDeletion(){this.deleting=!1},deleteCompany(){this.deleting=!0},handleError(){this.error=null},async loadCompany(){this.isLoading=!0;try{await this.$store.dispatch("companies/loadCompany",{id:this.comid})}catch(e){this.error=`${e.message} in getting company.`||"Something went wrong!"}this.isLoading=!1}},async created(){await this.loadCompany(),localStorage.setItem("comid",this.comid),localStorage.setItem("comidwt",this.comid)},computed:{hasCompany(){return!this.isLoading&&this.$store.getters["companies/hasCompany"]},company(){return this.$store.getters["companies/company"]},deletingDialog(){return this.deleting}}};const ns=(0,ae.Z)(ss,[["render",Ao]]);var rs=ns;const ls=e=>((0,O.dD)("data-v-a9dd7e90"),e=e(),(0,O.Cn)(),e),ds={class:"form-control"},ms=ls((()=>(0,O._)("label",{for:"numberOfEmployees"},"Number of employees per department (up to 30)",-1))),cs={class:"form-control"},us=ls((()=>(0,O._)("label",{for:"numberOfDays"},"Number of working days (up to 90)",-1)));function ps(e,t,a,o,s,n){const r=(0,O.up)("base-dialog"),l=(0,O.up)("base-button"),d=(0,O.up)("base-card");return(0,O.wg)(),(0,O.j4)(d,null,{default:(0,O.w5)((()=>[(0,O.Wm)(r,{show:!!s.error,title:"An error occured",onClose:n.handleError,showClose:!0},{default:(0,O.w5)((()=>[(0,O._)("p",null,(0,Tt.zw)(s.error),1)])),_:1},8,["show","onClose"]),(0,O._)("form",{onSubmit:t[2]||(t[2]=(0,i.iM)(((...e)=>n.submit&&n.submit(...e)),["prevent"]))},[(0,O._)("div",ds,[ms,(0,O.wy)((0,O._)("input",{type:"number",name:"numberOfEmployees",id:"numberOfEmployees","onUpdate:modelValue":t[0]||(t[0]=e=>s.numberOfEmployees=e),min:"1",max:"30"},null,512),[[i.nr,s.numberOfEmployees]])]),(0,O._)("div",cs,[us,(0,O.wy)((0,O._)("input",{type:"number",name:"numberOfDays",id:"numberOfDays","onUpdate:modelValue":t[1]||(t[1]=e=>s.numberOfDays=e),min:"1",max:"90"},null,512),[[i.nr,s.numberOfDays]])]),(0,O.Wm)(l,null,{default:(0,O.w5)((()=>[(0,O.Uk)("Generate")])),_:1})],32)])),_:1})}var hs={props:["comid"],data(){return{error:null,numberOfEmployees:1,numberOfDays:1}},methods:{async submit(){const e={comid:this.comid,numberOfEmployees:this.numberOfEmployees,numberOfDays:this.numberOfDays};try{await this.$store.dispatch("generate/generateData",e),this.$router.replace(`/employees/${this.$route.params.comid}`)}catch(t){this.error=`${t.message} in generating data.`||"Something went wrong!"}},handleError(){this.error=null}}};const ys=(0,ae.Z)(hs,[["render",ps],["__scopeId","data-v-a9dd7e90"]]);var ws=ys;const gs={key:1};function fs(e,t,a,i,o,s){const n=(0,O.up)("user-form"),r=(0,O.up)("base-card");return(0,O.wg)(),(0,O.iD)("div",null,[(0,O.Wm)(r,null,{default:(0,O.w5)((()=>[s.hasCurrentUser?((0,O.wg)(),(0,O.j4)(n,{Mode:"old",key:s.currentUser.Email,FirstName:s.currentUser.FirstName,LastName:s.currentUser.LastName,Email:s.currentUser.Email},null,8,["FirstName","LastName","Email"])):((0,O.wg)(),(0,O.iD)("p",gs,"There's something wrong with loading of the user data."))])),_:1})])}var ks={components:{UserForm:Ri},methods:{async loadUser(){await this.$store.dispatch("auth/getUser")}},computed:{currentUser(){return this.$store.getters["auth/currentUser"]},hasCurrentUser(){return this.$store.getters["auth/hasCurrentUser"]}},async created(){await this.loadUser()}};const vs=(0,ae.Z)(ks,[["render",fs]]);var _s=vs;const Ds=e=>((0,O.dD)("data-v-91f43a06"),e=e(),(0,O.Cn)(),e),bs={key:0},Es={class:"controls"},Is={key:1},Ts=Ds((()=>(0,O._)("tr",null,[(0,O._)("th",null,"ID"),(0,O._)("th",null,"Name"),(0,O._)("th",null,"Title"),(0,O._)("th",null,"Degree"),(0,O._)("th",null,"Phone"),(0,O._)("th",null,"Department"),(0,O._)("th",null,"Hourly rate"),(0,O._)("th")],-1))),Cs={key:2},Ss={key:3};function $s(e,t,a,i,o,s){const n=(0,O.up)("base-dialog"),r=(0,O.up)("employee-filter"),l=(0,O.up)("base-spinner"),d=(0,O.up)("base-button"),m=(0,O.up)("employee-item"),c=(0,O.up)("router-link"),u=(0,O.up)("base-card");return(0,O.wg)(),(0,O.iD)("div",null,[(0,O.Wm)(n,{show:!!o.error,title:"An error occured",onClose:s.handleError,showClose:!0},{default:(0,O.w5)((()=>[(0,O._)("p",null,(0,Tt.zw)(o.error),1)])),_:1},8,["show","onClose"]),(0,O._)("section",null,[o.show?((0,O.wg)(),(0,O.j4)(r,{key:0,onChangeFilter:s.setFilters},null,8,["onChangeFilter"])):(0,O.kq)("",!0)]),(0,O._)("section",null,[(0,O.Wm)(u,null,{default:(0,O.w5)((()=>[o.isLoading?((0,O.wg)(),(0,O.iD)("div",bs,[(0,O.Wm)(l)])):(0,O.kq)("",!0),(0,O._)("div",Es,[(0,O.Wm)(d,{onClick:s.refresh},{default:(0,O.w5)((()=>[(0,O.Uk)("Refresh")])),_:1},8,["onClick"]),s.hasEmployees?((0,O.wg)(),(0,O.j4)(d,{key:0,link:"",to:"/addemployee"},{default:(0,O.w5)((()=>[(0,O.Uk)("Add employee")])),_:1})):(0,O.kq)("",!0)]),s.hasEmployees?((0,O.wg)(),(0,O.iD)("table",Is,[Ts,((0,O.wg)(!0),(0,O.iD)(O.HY,null,(0,O.Ko)(s.filteredEmployees,(e=>((0,O.wg)(),(0,O.j4)(m,{key:e.ID,ID:e.ID,FirstName:e.FirstName,LastName:e.LastName,JobTitle:e.JobTitle,Degree:e.Degree,Address:e.Address,Phone:e.Phone,DateOfBirth:e.DateOfBirth,StartOfEmployment:e.StartOfEmployment,HourlyRate:e.HourlyRate,DepartmentId:e.DepartmentId,Department:e.Department},null,8,["ID","FirstName","LastName","JobTitle","Degree","Address","Phone","DateOfBirth","StartOfEmployment","HourlyRate","DepartmentId","Department"])))),128))])):s.hasDepartments?((0,O.wg)(),(0,O.iD)("h3",Cs,[(0,O.Uk)(" There are no employees. "),(0,O.Wm)(c,{to:"/addemployee"},{default:(0,O.w5)((()=>[(0,O.Uk)("Add one")])),_:1}),(0,O.Uk)(", or "),(0,O.Wm)(c,{to:s.generateLink},{default:(0,O.w5)((()=>[(0,O.Uk)("randomly generate both employees and their working times!")])),_:1},8,["to"])])):((0,O.wg)(),(0,O.iD)("h3",Ss,[(0,O.Uk)("You must "),(0,O.Wm)(c,{to:"/adddepartment"},{default:(0,O.w5)((()=>[(0,O.Uk)("add department")])),_:1}),(0,O.Uk)(" before you add any employees. ")]))])),_:1})])])}function js(e,t,a,i,o,s){const n=(0,O.up)("base-button");return(0,O.wg)(),(0,O.iD)("tr",null,[(0,O._)("td",null,(0,Tt.zw)(a.ID),1),(0,O._)("td",null,(0,Tt.zw)(s.fullName),1),(0,O._)("td",null,(0,Tt.zw)(a.JobTitle),1),(0,O._)("td",null,(0,Tt.zw)(a.Degree),1),(0,O._)("td",null,(0,Tt.zw)(a.Phone),1),(0,O._)("td",null,(0,Tt.zw)(a.Department.name),1),(0,O._)("td",null,(0,Tt.zw)(a.HourlyRate)+" $",1),(0,O._)("td",null,[(0,O.Wm)(n,{link:"",to:s.detailsLink},{default:(0,O.w5)((()=>[(0,O.Uk)("Details")])),_:1},8,["to"])])])}var Vs={props:["ID","FirstName","LastName","JobTitle","Degree","Phone","Address","DateOfBirth","StartOdEmployment","HourlyRate","DepartmentId","Department"],computed:{fullName(){return`${this.FirstName} ${this.LastName}`},detailsLink(){return null!==localStorage.getItem("depid")?`${this.$route.path.split("/").slice(0,-3).join("/")}/employeedetails/${this.ID}`:`${this.$route.path.split("/").slice(0,-2).join("/")}/employeedetails/${this.ID}`}}};const Ns=(0,ae.Z)(Vs,[["render",js]]);var As=Ns,Ws={components:{EmployeeItem:As,EmployeeFilter:(0,O.RC)((()=>a.e(161).then(a.bind(a,9161))))},computed:{hasEmployees(){return!this.isLoading&&this.$store.getters["employees/hasEmployees"]},hasDepartments(){return!this.isLoading&&this.$store.getters["departments/hasDepartments"]},generateLink(){return`/generate/${localStorage.getItem("comid")}`},filteredEmployees(){let e=this.$store.getters["employees/employees"];return e=e.filter((e=>{if(e.ID.includes(this.activeFilters.id))return!0})),e=e.filter((e=>{if(e.FirstName.toUpperCase().includes(this.activeFilters.firstName.toUpperCase()))return!0})),e=e.filter((e=>{if(e.LastName.toUpperCase().includes(this.activeFilters.lastName.toUpperCase()))return!0})),e=e.filter((e=>{if(e.Department.name.toUpperCase().includes(this.activeFilters.department.toUpperCase()))return!0})),e=e.filter((e=>{if(0===+this.activeFilters.hourlyRate||+e.HourlyRate===+this.activeFilters.hourlyRate)return!0})),e}},watch:{activeFilters(){this.refresh()}},data(){return{isLoading:!1,error:null,activeFilters:{id:"",firstName:"",lastName:"",department:"",hourlyRate:0,pageNumber:0,pageSize:10},show:!1}},methods:{async loadEmployees(){this.isLoading=!0;try{null!==localStorage.getItem("comid")&&null===localStorage.getItem("depid")?await this.$store.dispatch("employees/loadEmployees",{link:`${localStorage.getItem("comid")}?PageNumber=${this.activeFilters.pageNumber}&PageSize=${this.activeFilters.pageSize}`}):await this.$store.dispatch("employees/loadEmployees",{link:`${localStorage.getItem("comid")}/${localStorage.getItem("depid")}?PageNumber=${this.activeFilters.pageNumber}&PageSize=${this.activeFilters.pageSize}`}),this.show=!0}catch(e){this.error=`${e.message} in getting employees.`||"Something went wrong!"}this.isLoading=!1},handleError(){this.error=null},async refresh(){await this.loadEmployees()},setFilters(e){this.activeFilters=e,this.activeFilters.hourlyRate!==isNaN(e.hourlyRate)&&parseFloat(e.hourlyRate)}},async created(){await this.loadEmployees(),localStorage.removeItem("empid")}};const Us=(0,ae.Z)(Ws,[["render",$s],["__scopeId","data-v-91f43a06"]]);var Fs=Us;const Ls={key:0},Ms={key:2};function Ps(e,t,a,i,o,s){const n=(0,O.up)("base-dialog"),r=(0,O.up)("base-spinner"),l=(0,O.up)("employee-form"),d=(0,O.up)("employee-delete-options");return(0,O.wg)(),(0,O.iD)("div",null,[(0,O.Wm)(n,{show:!!o.error,title:"An error occured",onClose:s.handleError,showClose:!0},{default:(0,O.w5)((()=>[(0,O._)("p",null,(0,Tt.zw)(o.error),1)])),_:1},8,["show","onClose"]),o.isLoading?((0,O.wg)(),(0,O.iD)("div",Ls,[(0,O.Wm)(r)])):(0,O.kq)("",!0),s.hasEmployee?((0,O.wg)(),(0,O.j4)(l,{onSaveData:s.saveData,onDeleteEmployee:s.deleteEmployee,key:s.employee.ID,ID:s.employee.ID,FirstName:s.employee.FirstName,LastName:s.employee.LastName,Degree:s.employee.Degree,JobTitle:s.employee.JobTitle,HourlyRate:s.employee.HourlyRate,Department:s.employee.Department,DepartmentId:s.employee.DepartmentId,Address:s.employee.Address,Phone:s.employee.Phone,Email:s.employee.Email,DateOfBirth:s.employee.DateOfBirth,StartOfEmployment:s.employee.StartOfEmployment,Mode:this.EditMode},null,8,["onSaveData","onDeleteEmployee","ID","FirstName","LastName","Degree","JobTitle","HourlyRate","Department","DepartmentId","Address","Phone","Email","DateOfBirth","StartOfEmployment","Mode"])):o.isLoading?(0,O.kq)("",!0):((0,O.wg)(),(0,O.iD)("h3",Ms,"There's some problems with loading of this employee.")),(0,O.Wm)(n,{showClose:!1,fixed:"",title:"Select some delete options",show:o.deleting},{default:(0,O.w5)((()=>[(0,O.Wm)(d,{onCancel:s.cancelDeletion},null,8,["onCancel"])])),_:1},8,["show"])])}const Os=(0,O._)("div",null,[(0,O._)("p",{style:{"text-align":"justify"}}," Would you like to delete the employee? If you choose YES, all of the employee's working times will be deleted as well. ")],-1),zs={class:"form-control"};function qs(e,t,a,i,o,s){const n=(0,O.up)("base-button");return(0,O.wg)(),(0,O.iD)(O.HY,null,[Os,(0,O._)("div",zs,[(0,O.Wm)(n,{style:{display:"inline"},onClick:s.deleteEmployee},{default:(0,O.w5)((()=>[(0,O.Uk)("Delete")])),_:1},8,["onClick"]),(0,O.Wm)(n,{style:{display:"inline"},onClick:s.cancel},{default:(0,O.w5)((()=>[(0,O.Uk)("Cancel")])),_:1},8,["onClick"])])],64)}var Bs={emits:["cancel"],methods:{async deleteEmployee(){try{await this.$store.dispatch("employees/deleteEmployee",{empId:localStorage.getItem("empid")});let e=`/employees/${localStorage.getItem("comid")}`;null!==localStorage.getItem("depid")&&(e+=`/${localStorage.getItem("depid")}`),this.$router.push(e)}catch(e){this.error=`${e.message} in deleting employee.`||"Something went wrong!"}},cancel(){this.$emit("cancel")}}};const xs=(0,ae.Z)(Bs,[["render",qs]]);var Ys=xs,Rs={components:{EmployeeForm:gi,EmployeeDeleteOptions:Ys},props:["empid"],data(){return{isLoading:!1,deleting:!1,mode:!0,EditMode:"old",error:null}},methods:{async saveData(e){this.isLoading=!0;try{await this.$store.dispatch("employees/editEmployee",e),this.$router.push("/employees/"+localStorage.getItem("comid"))}catch(t){this.error=t}this.isLoading=!1},async loadEmployee(){this.isLoading=!0;try{await this.$store.dispatch("employees/loadEmployee",{empid:this.empid})}catch(e){this.error=`${e.message} in getting employee.`||"Something went wrong!"}this.isLoading=!1},handleError(){this.error=null},cancelDeletion(){this.deleting=!1},deleteEmployee(){this.deleting=!0}},async created(){await this.loadEmployee(),localStorage.setItem("empid",this.empid),localStorage.setItem("empidwt",this.empid)},computed:{hasEmployee(){return!this.isLoading&&this.$store.getters["employees/hasEmployee"]},employee(){return this.$store.getters["employees/employee"]}}};const Hs=(0,ae.Z)(Rs,[["render",Ps]]);var Zs=Hs;const Js={class:"controls"},Gs={key:0},Ks={key:1},Qs={key:2};function Xs(e,t,a,i,o,s){const n=(0,O.up)("base-dialog"),r=(0,O.up)("base-button"),l=(0,O.up)("base-spinner"),d=(0,O.up)("department-item"),m=(0,O.up)("router-link"),c=(0,O.up)("base-card");return(0,O.wg)(),(0,O.iD)("div",null,[(0,O.Wm)(n,{show:!!o.error,title:"An error occured",onClose:s.handleError,showClose:!0},{default:(0,O.w5)((()=>[(0,O._)("p",null,(0,Tt.zw)(o.error),1)])),_:1},8,["show","onClose"]),(0,O._)("section",null,[(0,O.Wm)(c,null,{default:(0,O.w5)((()=>[(0,O._)("div",Js,[(0,O.Wm)(r,{onClick:s.refresh},{default:(0,O.w5)((()=>[(0,O.Uk)("Refresh")])),_:1},8,["onClick"]),(0,O.Wm)(r,{link:"",to:"/adddepartment"},{default:(0,O.w5)((()=>[(0,O.Uk)("Add another department")])),_:1})]),o.isLoading?((0,O.wg)(),(0,O.iD)("div",Gs,[(0,O.Wm)(l)])):(0,O.kq)("",!0),s.hasDepartments?((0,O.wg)(),(0,O.iD)("ul",Ks,[((0,O.wg)(!0),(0,O.iD)(O.HY,null,(0,O.Ko)(s.filteredDepartments,(e=>((0,O.wg)(),(0,O.j4)(d,{key:e.ID,comid:this.comid,ID:e.ID,Name:e.Name},null,8,["comid","ID","Name"])))),128))])):o.isLoading?(0,O.kq)("",!0):((0,O.wg)(),(0,O.iD)("h3",Qs,[(0,O.Uk)(" There are no departments for this company. "),(0,O.Wm)(m,{to:"/adddepartment"},{default:(0,O.w5)((()=>[(0,O.Uk)("Add one!")])),_:1})]))])),_:1})])])}const en=e=>((0,O.dD)("data-v-ffa6283a"),e=e(),(0,O.Cn)(),e),tn=en((()=>(0,O._)("span",null,"(unique department ID)",-1))),an={class:"actions"};function on(e,t,a,i,o,s){const n=(0,O.up)("base-button");return(0,O.wg)(),(0,O.iD)("li",null,[(0,O._)("h2",null,[(0,O.Uk)((0,Tt.zw)(a.ID)+" ",1),tn]),(0,O._)("h2",null,(0,Tt.zw)(a.Name),1),(0,O._)("div",an,[(0,O.Wm)(n,{link:"",to:s.detailsLink},{default:(0,O.w5)((()=>[(0,O.Uk)("Details")])),_:1},8,["to"])])])}var sn={props:["ID","Name"],computed:{detailsLink(){return`${this.$route.path}/${this.ID}`}}};const nn=(0,ae.Z)(sn,[["render",on],["__scopeId","data-v-ffa6283a"]]);var rn=nn,ln={data(){return{isLoading:!1,error:null}},props:["comid"],components:{DepartmentItem:rn},computed:{hasDepartments(){return!this.isLoading&&this.$store.getters["departments/hasDepartments"]},filteredDepartments(){return this.$store.getters["departments/departments"]}},methods:{async loadDepartments(){this.isLoading=!0;try{await this.$store.dispatch("departments/loadDepartments",{comid:this.comid})}catch(e){this.error=`${e.message} in getting departments.`||"Something went wrong!"}this.isLoading=!1},handleError(){this.error=null},async refresh(){await this.loadDepartments()}},async created(){await this.loadDepartments(),localStorage.removeItem("depid")}};const dn=(0,ae.Z)(ln,[["render",Xs],["__scopeId","data-v-06caee26"]]);var mn=dn;const cn={key:0},un={key:2};function pn(e,t,a,i,o,s){const n=(0,O.up)("base-dialog"),r=(0,O.up)("base-spinner"),l=(0,O.up)("department-form"),d=(0,O.up)("department-delete-options");return(0,O.wg)(),(0,O.iD)("div",null,[(0,O.Wm)(n,{show:!!o.error,title:"An error occured",onClose:s.handleError,showClose:!0},{default:(0,O.w5)((()=>[(0,O._)("p",null,(0,Tt.zw)(o.error),1)])),_:1},8,["show","onClose"]),o.isLoading?((0,O.wg)(),(0,O.iD)("div",cn,[(0,O.Wm)(r)])):s.hasDepartment?((0,O.wg)(),(0,O.j4)(l,{onSaveData:s.saveData,onDeleteDepartment:s.deleteDepartment,key:s.department.ID,comid:this.comid,ID:s.department.ID,Name:s.department.Name,Mode:this.EditMode},null,8,["onSaveData","onDeleteDepartment","comid","ID","Name","Mode"])):o.isLoading?(0,O.kq)("",!0):((0,O.wg)(),(0,O.iD)("h3",un,"There's some problems with loading of this department.")),(0,O.Wm)(n,{showClose:!1,fixed:"",title:"Select some delete options",show:o.deleting},{default:(0,O.w5)((()=>[(0,O.Wm)(d,{onCancel:s.cancelDeletion},null,8,["onCancel"])])),_:1},8,["show"])])}const hn=e=>((0,O.dD)("data-v-49f232c6"),e=e(),(0,O.Cn)(),e),yn=hn((()=>(0,O._)("p",{style:{"text-align":"justify"}}," Would you like to delete all of the employees from this department? If you choose YES, all of the employees and their working times will be deleted. ",-1))),wn={class:"form-control"},gn=hn((()=>(0,O._)("label",{for:"deleteAll"},"Delete all employees:",-1))),fn=hn((()=>(0,O._)("option",{value:"0",selected:""},"NO",-1))),kn=hn((()=>(0,O._)("option",{value:"1"},"YES",-1))),vn=[fn,kn],_n={key:0},Dn=hn((()=>(0,O._)("p",{style:{"text-align":"justify"}}," Select destination department you would like to transfer the employees to. ",-1))),bn={class:"form-control"},En=hn((()=>(0,O._)("label",{for:"companyId"},"Select department:",-1))),In=["value"],Tn={key:1},Cn={class:"form-control"};function Sn(e,t,a,o,s,n){const r=(0,O.up)("base-button");return(0,O.wg)(),(0,O.iD)(O.HY,null,[(0,O._)("div",null,[yn,(0,O._)("div",wn,[gn,(0,O.wy)((0,O._)("select",{name:"deleteAll",id:"deleteAll","onUpdate:modelValue":t[0]||(t[0]=e=>s.delSelected=e)},vn,512),[[i.bM,s.delSelected]])])]),n.delSel>0?(0,O.kq)("",!0):((0,O.wg)(),(0,O.iD)("div",_n,[Dn,(0,O._)("div",bn,[En,s.loadedDepartments.length>0?(0,O.wy)(((0,O.wg)(),(0,O.iD)("select",{key:0,name:"departmentId","onUpdate:modelValue":t[1]||(t[1]=e=>s.depId=e),id:"departmentId"},[((0,O.wg)(!0),(0,O.iD)(O.HY,null,(0,O.Ko)(n.departments,(e=>((0,O.wg)(),(0,O.iD)("option",{key:e.ID,value:e.ID},(0,Tt.zw)(e.Name),9,In)))),128))],512)),[[i.bM,s.depId]]):((0,O.wg)(),(0,O.iD)("p",Tn," There are no departments to choose from. Either add some departments to the company, or delete all the employees. "))])])),(0,O._)("div",Cn,[(0,O.Wm)(r,{style:{display:"inline"},onClick:n.deleteDepartment},{default:(0,O.w5)((()=>[(0,O.Uk)("Delete")])),_:1},8,["onClick"]),(0,O.Wm)(r,{style:{display:"inline"},onClick:n.cancel},{default:(0,O.w5)((()=>[(0,O.Uk)("Cancel")])),_:1},8,["onClick"])])],64)}var $n={emits:["cancel"],data(){return{delSelected:(0,ts.iH)("1"),depId:(0,ts.iH)(""),loadedDepartments:[]}},computed:{delSel(){return this.delSelected},departments(){return this.loadedDepartments}},watch:{async delSelected(){0==this.delSelected&&await this.loadDepartments()}},methods:{async deleteDepartment(){const e={depId:parseInt(localStorage.getItem("depid")),targetDepId:this.depId>0?this.depId:0,deleteEmployees:0!=this.delSelected};try{await this.$store.dispatch("departments/deleteDepartment",e),this.$router.push("/departments/"+localStorage.getItem("comid"))}catch(t){this.error=`${t.message} in deleting department.`||"Something went wrong!"}},cancel(){this.$emit("cancel")},async loadDepartments(){try{await this.$store.dispatch("departments/loadDepartments",{comid:parseInt(localStorage.getItem("comid"))})}catch(e){this.error=`${e.message} in getting department.`||"Something went wrong!"}this.loadedDepartments=this.$store.getters["departments/departments"].filter((e=>+e.ID!==parseInt(localStorage.getItem("depid"))))}}};const jn=(0,ae.Z)($n,[["render",Sn],["__scopeId","data-v-49f232c6"]]);var Vn=jn,Nn={components:{DepartmentForm:Ea,DepartmentDeleteOptions:Vn},props:["depid","comid"],data(){return{error:null,isLoading:!1,deleting:!1,mode:!0,EditMode:"old"}},methods:{async saveData(e){await this.$store.dispatch("departments/editDepartment",e),this.$router.push(`/departments/${this.comid}`)},cancelDeletion(){this.deleting=!1},deleteDepartment(){this.deleting=!0},async loadDepartment(){this.isLoading=!0;try{await this.$store.dispatch("departments/loadDepartment",{comid:this.comid,depid:this.depid})}catch(e){this.error=`${e.message} in getting department.`||"Something went wrong!"}this.isLoading=!1},handleError(){this.error=null}},async created(){await this.loadDepartment(),localStorage.setItem("depid",this.depid),localStorage.setItem("depidwt",this.depid)},computed:{hasDepartment(){return!this.isLoading&&this.$store.getters["departments/hasDepartment"]},department(){return this.$store.getters["departments/department"]}}};const An=(0,ae.Z)(Nn,[["render",pn]]);var Wn=An;const Un=e=>((0,O.dD)("data-v-18791de4"),e=e(),(0,O.Cn)(),e),Fn={key:0},Ln={class:"form-control"},Mn=Un((()=>(0,O._)("label",{for:"email"},"Email",-1))),Pn={class:"form-control"},On=Un((()=>(0,O._)("label",{for:"username"},"Password",-1)));function zn(e,t,a,o,s,n){const r=(0,O.up)("base-dialog"),l=(0,O.up)("base-spinner"),d=(0,O.up)("base-button"),m=(0,O.up)("base-card");return(0,O.wg)(),(0,O.iD)("div",null,[(0,O.Wm)(r,{show:!!s.error,title:"An error occured",showClose:!0,onClose:n.handleError},{default:(0,O.w5)((()=>[(0,O._)("p",null,(0,Tt.zw)(s.error),1)])),_:1},8,["show","onClose"]),s.isLoading?((0,O.wg)(),(0,O.iD)("div",Fn,[(0,O.Wm)(l)])):(0,O.kq)("",!0),(0,O.Wm)(m,null,{default:(0,O.w5)((()=>[(0,O._)("form",{onSubmit:t[2]||(t[2]=(0,i.iM)(((...e)=>n.submitData&&n.submitData(...e)),["prevent"]))},[(0,O._)("div",Ln,[Mn,(0,O.wy)((0,O._)("input",{type:"text",id:"email",name:"email","onUpdate:modelValue":t[0]||(t[0]=e=>s.email.val=e)},null,512),[[i.nr,s.email.val]])]),(0,O._)("div",Pn,[On,(0,O.wy)((0,O._)("input",{type:"password",id:"password",name:"password","onUpdate:modelValue":t[1]||(t[1]=e=>s.password.val=e)},null,512),[[i.nr,s.password.val]])]),(0,O.Wm)(d,null,{default:(0,O.w5)((()=>[(0,O.Uk)("Login")])),_:1})],32)])),_:1})])}var qn={data(){return{error:null,isLoading:!1,formIsValid:!0,email:{isValid:!0,val:""},password:{isValid:!0,val:""}}},methods:{handleError(){this.error=null},async submitData(){if(this.validateForm(),this.formIsValid){try{this.isLoading=!0,await this.$store.dispatch("auth/login",{Email:this.email.val,Password:this.password.val}),this.$router.push("/companies")}catch(e){this.error=`${e.message} in logging in.`||"Something went wrong!"}this.isLoading=!1}else this.isLoading=!1},validateForm(){this.formIsValid=!0,""===this.email&&(this.email.isValid=!1,this.formIsValid=!1),""===this.password&&(this.password.isValid=!1,this.formIsValid=!1)}}};const Bn=(0,ae.Z)(qn,[["render",zn],["__scopeId","data-v-18791de4"]]);var xn=Bn;const Yn=e=>((0,O.dD)("data-v-56eff514"),e=e(),(0,O.Cn)(),e),Rn={key:0},Hn={key:1},Zn=Yn((()=>(0,O._)("tr",null,[(0,O._)("th",null,"ID"),(0,O._)("th",null,"Full name"),(0,O._)("th",null,"Department"),(0,O._)("th",null,"Hourly rate"),(0,O._)("th",null,"Total working days"),(0,O._)("th",null,"Regular working hours"),(0,O._)("th",null,"Overtime working hours"),(0,O._)("th",null,"Total earnings")],-1))),Jn={key:2};function Gn(e,t,a,i,o,s){const n=(0,O.up)("statistics-filter"),r=(0,O.up)("base-dialog"),l=(0,O.up)("base-spinner"),d=(0,O.up)("base-card");return(0,O.wg)(),(0,O.iD)("div",null,[(0,O._)("section",null,[(0,O.Wm)(n,{onFilterChanged:s.changeData},null,8,["onFilterChanged"])]),(0,O.Wm)(r,{show:!!o.error,title:"An error occured",onClose:s.handleError,showClose:!0},{default:(0,O.w5)((()=>[(0,O._)("p",null,(0,Tt.zw)(o.error),1)])),_:1},8,["show","onClose"]),(0,O._)("section",null,[(0,O.Wm)(d,null,{default:(0,O.w5)((()=>[o.isLoading?((0,O.wg)(),(0,O.iD)("div",Rn,[(0,O.Wm)(l)])):(0,O.kq)("",!0),s.hasStatistics?((0,O.wg)(),(0,O.iD)("table",Hn,[Zn,((0,O.wg)(!0),(0,O.iD)(O.HY,null,(0,O.Ko)(s.statistics,(e=>((0,O.wg)(),(0,O.iD)("tr",{key:e.ID},[(0,O._)("td",null,(0,Tt.zw)(e.ID),1),(0,O._)("td",null,(0,Tt.zw)(e.FirstName+" "+e.LastName),1),(0,O._)("td",null,(0,Tt.zw)(e.Department),1),(0,O._)("td",null,(0,Tt.zw)(e.HourlyRate)+" $",1),(0,O._)("td",null,(0,Tt.zw)(e.WorkingDays),1),(0,O._)("td",null,(0,Tt.zw)(e.RegularWorkingHours),1),(0,O._)("td",null,(0,Tt.zw)(e.OvertimeHours),1),(0,O._)("td",null,(0,Tt.zw)(e.Earnings.toFixed(2))+" $",1)])))),128))])):o.isLoading?(0,O.kq)("",!0):((0,O.wg)(),(0,O.iD)("p",Jn," There are no statistics for this company, or for this period. You must add some data first, or revisit filter section. "))])),_:1})])])}const Kn=e=>((0,O.dD)("data-v-67d9ff12"),e=e(),(0,O.Cn)(),e),Qn={class:"form-control",style:{display:"block","text-align":"center"}},Xn=Kn((()=>(0,O._)("label",{for:"choice"},"Select the ammount of data to be displayed",-1))),er=Kn((()=>(0,O._)("option",{value:"0"},"All of it",-1))),tr=Kn((()=>(0,O._)("option",{value:"1"},"Specific",-1))),ar=[er,tr],ir=Kn((()=>(0,O._)("br",null,null,-1))),or={key:0,style:{"text-align":"center"}},sr={class:"form-control"},nr=Kn((()=>(0,O._)("label",{for:"year"},"Year",-1))),rr=["value"],lr={class:"form-control"},dr=Kn((()=>(0,O._)("label",{for:"month"},"Month",-1))),mr=Kn((()=>(0,O._)("option",{value:0,selected:""},"Entire year",-1))),cr=Kn((()=>(0,O._)("option",{value:1},"January",-1))),ur=Kn((()=>(0,O._)("option",{value:2},"February",-1))),pr=Kn((()=>(0,O._)("option",{value:3},"March",-1))),hr=Kn((()=>(0,O._)("option",{value:4},"April",-1))),yr=Kn((()=>(0,O._)("option",{value:5},"May",-1))),wr=Kn((()=>(0,O._)("option",{value:6},"June",-1))),gr=Kn((()=>(0,O._)("option",{value:7},"July",-1))),fr=Kn((()=>(0,O._)("option",{value:8},"August",-1))),kr=Kn((()=>(0,O._)("option",{value:9},"September",-1))),vr=Kn((()=>(0,O._)("option",{value:10},"October",-1))),_r=Kn((()=>(0,O._)("option",{value:11},"November",-1))),Dr=Kn((()=>(0,O._)("option",{value:12},"December",-1))),br=[mr,cr,ur,pr,hr,yr,wr,gr,fr,kr,vr,_r,Dr];function Er(e,t,a,o,s,n){const r=(0,O.up)("base-card");return(0,O.wg)(),(0,O.j4)(r,null,{default:(0,O.w5)((()=>[(0,O._)("form",null,[(0,O._)("div",Qn,[Xn,(0,O.wy)((0,O._)("select",{name:"choice",id:"choice","onUpdate:modelValue":t[0]||(t[0]=e=>s.choice=e),onChange:t[1]||(t[1]=(...e)=>n.changeFilter&&n.changeFilter(...e))},ar,544),[[i.bM,s.choice]])]),ir,"1"===n.choiceChanged?((0,O.wg)(),(0,O.iD)("div",or,[(0,O._)("div",sr,[nr,(0,O.wy)((0,O._)("select",{name:"year",id:"year","onUpdate:modelValue":t[2]||(t[2]=e=>s.filterData.year=e),onChange:t[3]||(t[3]=(...e)=>n.changeFilter&&n.changeFilter(...e))},[((0,O.wg)(!0),(0,O.iD)(O.HY,null,(0,O.Ko)(n.yearsForSelect,(e=>((0,O.wg)(),(0,O.iD)("option",{value:e,key:e},(0,Tt.zw)(e),9,rr)))),128))],544),[[i.bM,s.filterData.year]])]),(0,O._)("div",lr,[dr,(0,O.wy)((0,O._)("select",{name:"month",id:"month","onUpdate:modelValue":t[4]||(t[4]=e=>s.filterData.month=e),onChange:t[5]||(t[5]=(...e)=>n.changeFilter&&n.changeFilter(...e))},br,544),[[i.bM,s.filterData.month]])])])):(0,O.kq)("",!0)])])),_:1})}var Ir={data(){return{years:[],choice:"0",filterData:{month:0,year:0}}},emits:["filter-changed"],computed:{yearsForSelect(){return this.years},choiceChanged(){return this.choice}},methods:{changeFilter(){this.$emit("filter-changed",this.filterData)}},created(){for(let e=(new Date).getFullYear();e>=2e3;e--)this.years.push(e)}};const Tr=(0,ae.Z)(Ir,[["render",Er],["__scopeId","data-v-67d9ff12"]]);var Cr=Tr,Sr={data(){return{error:null,isLoading:!1,filterData:{month:0,year:0}}},components:{StatisticsFilter:Cr},methods:{async loadStatistics(){this.isLoading=!0;try{await this.$store.dispatch("statistics/loadStatistics",{comid:parseInt(localStorage.getItem("comid")),month:this.filterData.month,year:this.filterData.year})}catch(e){this.error=`${e.message} in getting statistics.`||"Something went wrong!"}this.isLoading=!1},async changeData(e){this.filterData=e,await this.loadStatistics()},handleError(){this.error=null}},computed:{statistics(){return this.$store.getters["statistics/statistics"]},hasStatistics(){return this.$store.getters["statistics/hasStatistics"]}},async created(){await this.loadStatistics()}};const $r=(0,ae.Z)(Sr,[["render",Gn],["__scopeId","data-v-56eff514"]]);var jr=$r;const Vr=e=>((0,O.dD)("data-v-43da221f"),e=e(),(0,O.Cn)(),e),Nr={class:"controls"},Ar={key:0},Wr={key:1},Ur=Vr((()=>(0,O._)("tr",null,[(0,O._)("th",null,"ID"),(0,O._)("th",null,"Employee name"),(0,O._)("th",null,"Date"),(0,O._)("th",null,"Start time"),(0,O._)("th",null,"End time"),(0,O._)("th")],-1))),Fr={key:2},Lr={class:"form-control",style:{"text-align":"center"}};function Mr(e,t,a,i,o,s){const n=(0,O.up)("base-dialog"),r=(0,O.up)("working-time-form"),l=(0,O.up)("add-working-time"),d=(0,O.up)("working-time-filter"),m=(0,O.up)("base-button"),c=(0,O.up)("base-spinner"),u=(0,O.up)("working-time-item"),p=(0,O.up)("base-card");return(0,O.wg)(),(0,O.iD)("div",null,[(0,O.Wm)(n,{show:!!o.error,title:"An error occured",onClose:s.handleError,showClose:!0},{default:(0,O.w5)((()=>[(0,O._)("p",null,(0,Tt.zw)(o.error),1)])),_:1},8,["show","onClose"]),(0,O.Wm)(n,{show:o.editing,title:"Edit working time",showClose:!1},{default:(0,O.w5)((()=>[s.hasWorkingTime?((0,O.wg)(),(0,O.j4)(r,{key:s.workingTime.ID,ID:s.workingTime.ID,Employee:s.workingTime.Employee,WtDate:s.workingTime.WtDate,StartTime:s.workingTime.StartTime,EndTime:s.workingTime.EndTime,Mode:!0===o.editing?"old":"new",onClose:s.closeEditor,onCancel:s.cancelEditing,onCatchError:s.catchError},null,8,["ID","Employee","WtDate","StartTime","EndTime","Mode","onClose","onCancel","onCatchError"])):(0,O.kq)("",!0)])),_:1},8,["show"]),(0,O.Wm)(n,{show:o.creating,title:"Add working data",showClose:!1},{default:(0,O.w5)((()=>[(0,O.Wm)(l,{onClose:s.close,onCancel:s.close,onCatchError:s.catchError},null,8,["onClose","onCancel","onCatchError"])])),_:1},8,["show"]),(0,O._)("section",null,[o.show?((0,O.wg)(),(0,O.j4)(d,{key:0,onParamsChanged:s.setParams},null,8,["onParamsChanged"])):(0,O.kq)("",!0)]),(0,O._)("section",null,[(0,O.Wm)(p,null,{default:(0,O.w5)((()=>[(0,O._)("div",Nr,[(0,O.Wm)(m,{onClick:s.refresh},{default:(0,O.w5)((()=>[(0,O.Uk)("Refresh")])),_:1},8,["onClick"]),s.hasWorkingTimes?((0,O.wg)(),(0,O.j4)(m,{key:0,onClick:s.create},{default:(0,O.w5)((()=>[(0,O.Uk)("Add a working time")])),_:1},8,["onClick"])):(0,O.kq)("",!0),(0,O.Wm)(m,{link:"",to:s.addMultipleWTsLink,mode:"a",style:{display:"inline"}},{default:(0,O.w5)((()=>[(0,O.Uk)("Add multiple working times")])),_:1},8,["to"])]),o.isLoading?((0,O.wg)(),(0,O.iD)("div",Ar,[(0,O.Wm)(c)])):s.hasWorkingTimes?((0,O.wg)(),(0,O.iD)("table",Wr,[Ur,((0,O.wg)(!0),(0,O.iD)(O.HY,null,(0,O.Ko)(s.filteredWorkingTimes,(e=>((0,O.wg)(),(0,O.j4)(u,{onDelete:s.deleteWT,onEdit:s.editWT,key:e.ID,ID:e.ID,Employee:e.Employee,WtDate:e.Date,StartTime:e.StartTime,EndTime:e.EndTime},null,8,["onDelete","onEdit","ID","Employee","WtDate","StartTime","EndTime"])))),128))])):((0,O.wg)(),(0,O.iD)("h3",Fr,[(0,O.Uk)(" There are no working times. "),(0,O.Wm)(m,{onClick:s.create,id:"addLink"},{default:(0,O.w5)((()=>[(0,O.Uk)("Add one")])),_:1},8,["onClick"])]))])),_:1}),(0,O.Wm)(n,{show:o.deleting,title:"Do you want to delete selected working time?",showClose:!1},{default:(0,O.w5)((()=>[(0,O._)("div",Lr,[(0,O.Wm)(m,{style:{display:"inline"},onClick:s.deleteWTnow},{default:(0,O.w5)((()=>[(0,O.Uk)("Delete")])),_:1},8,["onClick"]),(0,O.Wm)(m,{style:{display:"inline"},onClick:s.cancel},{default:(0,O.w5)((()=>[(0,O.Uk)("Cancel")])),_:1},8,["onClick"])])])),_:1},8,["show"])])])}const Pr={id:"actions"};function Or(e,t,a,i,o,s){const n=(0,O.up)("base-button");return(0,O.wg)(),(0,O.iD)("tr",null,[(0,O._)("td",null,(0,Tt.zw)(a.ID),1),(0,O._)("td",null,(0,Tt.zw)(s.fullName),1),(0,O._)("td",null,(0,Tt.zw)(new Date(a.WtDate).toDateString()),1),(0,O._)("td",null,(0,Tt.zw)(a.StartTime),1),(0,O._)("td",null,(0,Tt.zw)(a.EndTime),1),(0,O._)("td",Pr,[(0,O.Wm)(n,{type:"button",style:{display:"inline"},onClick:s.editWT},{default:(0,O.w5)((()=>[(0,O.Uk)("Edit")])),_:1},8,["onClick"]),(0,O.Wm)(n,{type:"button",style:{display:"inline"},onClick:s.deleteWT},{default:(0,O.w5)((()=>[(0,O.Uk)("Delete")])),_:1},8,["onClick"])])])}var zr={props:["ID","Employee","WtDate","StartTime","EndTime"],emits:["delete","edit"],computed:{fullName(){return`${this.Employee.firstName} ${this.Employee.lastName}`}},methods:{deleteWT(){this.$emit("delete",this.ID)},editWT(){this.$emit("edit",this.ID)}}};const qr=(0,ae.Z)(zr,[["render",Or],["__scopeId","data-v-4462d251"]]);var Br=qr;const xr=e=>((0,O.dD)("data-v-ff8eb9be"),e=e(),(0,O.Cn)(),e),Yr={key:0,class:"form-control"},Rr=xr((()=>(0,O._)("label",{for:"ID"},"ID",-1))),Hr=["value"],Zr={class:"form-control"},Jr=xr((()=>(0,O._)("label",{for:"Name"},"Name",-1))),Gr=["value"],Kr=xr((()=>(0,O._)("label",{for:"wtDate"},"Date",-1))),Qr=xr((()=>(0,O._)("label",{for:"StartTime"},"Start time",-1))),Xr=xr((()=>(0,O._)("label",{for:"EndTime"},"End time",-1))),el={key:1};function tl(e,t,a,o,s,n){const r=(0,O.up)("base-button");return(0,O.wg)(),(0,O.iD)("div",null,[(0,O._)("form",{onSubmit:t[3]||(t[3]=(0,i.iM)((e=>n.submitForm()),["prevent"]))},["old"===this.Mode?((0,O.wg)(),(0,O.iD)("div",Yr,[Rr,(0,O._)("input",{type:"text",name:"ID",disabled:"",value:this.ID},null,8,Hr)])):(0,O.kq)("",!0),(0,O._)("div",Zr,[Jr,(0,O._)("input",{type:"text",name:"Name",disabled:"",value:n.fullName},null,8,Gr)]),(0,O._)("div",{class:(0,Tt.C_)(["form-control",{invalid:!s.wtDate.isValid}])},[Kr,(0,O._)("input",{type:"text",name:"wtDate",ref:"wtDate",onBlur:t[0]||(t[0]=e=>n.clearValidity("wtDate"))},null,544)],2),(0,O._)("div",{class:(0,Tt.C_)(["form-control",{invalid:!s.wtStartTime.isValid}])},[Qr,(0,O._)("input",{type:"time",name:"StartTime",ref:"wtStartTime",onBlur:t[1]||(t[1]=e=>n.clearValidity("wtStartTime"))},null,544)],2),(0,O._)("div",{class:(0,Tt.C_)(["form-control",{invalid:!s.wtEndTime.isValid}])},[Xr,(0,O._)("input",{type:"time",name:"EndTime",ref:"wtEndTime",onBlur:t[2]||(t[2]=e=>n.clearValidity("wtEndTime"))},null,544)],2),s.formIsValid?(0,O.kq)("",!0):((0,O.wg)(),(0,O.iD)("p",el,"Please, fix the above errors and submit again.")),(0,O.Wm)(r,{style:{display:"inline"}},{default:(0,O.w5)((()=>[(0,O.Uk)("Save")])),_:1}),(0,O.Wm)(r,{style:{display:"inline"},type:"button",onClick:n.cancel},{default:(0,O.w5)((()=>[(0,O.Uk)("Cancel")])),_:1},8,["onClick"])],32)])}var al={props:["ID","Employee","WtDate","StartTime","EndTime","Mode"],emits:["close","cancel","catchError"],methods:{cancel(){this.$emit("cancel")},async submitForm(){try{if(this.wtDate.val=this.$refs.wtDate.value,this.wtStartTime.val=this.$refs.wtStartTime.value,this.wtEndTime.val=this.$refs.wtEndTime.value,this.validateForm(),!this.formIsValid)return;const e={wtDate:this.wtDate.val,wtStartTime:this.wtStartTime.val,wtEndTime:this.wtEndTime.val,wtEmployeeId:this.Employee.id};"old"===this.Mode&&(e.wtId=this.ID),await this.$store.dispatch("workingTimes/editWorkingTime",e),this.$emit("close")}catch(e){this.$emit("cancel"),this.$emit("catchError",e)}},clearValidity(e){this[e].isValid=!0},validateForm(){this.formIsValid=!0,""!==this.wtDate.val&&ia()(this.wtDate.val,"DD.MM.YYYY",!0).isValid()||(this.wtDate.isValid=!1,this.formIsValid=!1),this.wtStartTime.val.match(/\d+:\d+/)||(this.wtStartTime.isValid=!1,this.formIsValid=!1),this.wtEndTime.val.match(/\d+:\d+/)||(this.wtEndTime.isValid=!1,this.formIsValid=!1)}},data(){return{formIsValid:!0,wtDate:{isValid:!0,val:""},wtEndTime:{isValid:!0,val:""},wtStartTime:{isValid:!0,val:""}}},computed:{fullName(){return`${this.Employee.firstName} ${this.Employee.lastName}`}},mounted(){"old"===this.Mode&&(this.$refs.wtDate.value=ia()(this.WtDate.substring(0,10)).format("DD.MM.YYYY"),this.$refs.wtStartTime.value=this.StartTime,this.$refs.wtEndTime.value=this.EndTime)}};const il=(0,ae.Z)(al,[["render",tl],["__scopeId","data-v-ff8eb9be"]]);var ol=il;const sl=e=>((0,O.dD)("data-v-3cbe13c8"),e=e(),(0,O.Cn)(),e),nl=sl((()=>(0,O._)("label",{for:"employeeId"},"Employee",-1))),rl=sl((()=>(0,O._)("option",{value:"0",style:{"font-style":"italic"},disabled:""}," Select an employee ",-1))),ll=["value"],dl={key:1},ml=sl((()=>(0,O._)("p",null," There are no employees in this company. You must first add the employees. ",-1))),cl=[ml],ul=sl((()=>(0,O._)("label",{for:"wtDate"},"Date",-1))),pl=sl((()=>(0,O._)("label",{for:"StartTime"},"Start time",-1))),hl=sl((()=>(0,O._)("label",{for:"EndTime"},"End time",-1))),yl={key:2};function wl(e,t,a,o,s,n){const r=(0,O.up)("base-button");return(0,O.wg)(),(0,O.iD)("form",{onSubmit:t[7]||(t[7]=(0,i.iM)(((...e)=>n.submitData&&n.submitData(...e)),["prevent"]))},[n.hasEmployees?((0,O.wg)(),(0,O.iD)("div",{key:0,class:(0,Tt.C_)(["form-control",{invalid:!s.employeeId.isValid}])},[nl,(0,O.wy)((0,O._)("select",{name:"employeeId",id:"employeeId","onUpdate:modelValue":t[0]||(t[0]=e=>s.employeeId.val=e)},[rl,((0,O.wg)(!0),(0,O.iD)(O.HY,null,(0,O.Ko)(n.employees,(e=>((0,O.wg)(),(0,O.iD)("option",{key:e.ID,value:e.ID},(0,Tt.zw)(e.FirstName+" "+e.LastName),9,ll)))),128))],512),[[i.bM,s.employeeId.val]])],2)):((0,O.wg)(),(0,O.iD)("div",dl,cl)),(0,O._)("div",{class:(0,Tt.C_)(["form-control",{invalid:!s.wtDate.isValid}])},[ul,(0,O.wy)((0,O._)("input",{type:"text",name:"wtDate",onBlur:t[1]||(t[1]=e=>n.clearValidity("wtDate")),"onUpdate:modelValue":t[2]||(t[2]=e=>s.wtDate.val=e)},null,544),[[i.nr,s.wtDate.val]])],2),(0,O._)("div",{class:(0,Tt.C_)(["form-control",{invalid:!s.wtStartTime.isValid}])},[pl,(0,O.wy)((0,O._)("input",{type:"time",name:"wtStartTime",onBlur:t[3]||(t[3]=e=>n.clearValidity("wtStartTime")),"onUpdate:modelValue":t[4]||(t[4]=e=>s.wtStartTime.val=e)},null,544),[[i.nr,s.wtStartTime.val]])],2),(0,O._)("div",{class:(0,Tt.C_)(["form-control",{invalid:!s.wtEndTime.isValid}])},[hl,(0,O.wy)((0,O._)("input",{type:"time",name:"wtEndTime",onBlur:t[5]||(t[5]=e=>n.clearValidity("wtEndTime")),"onUpdate:modelValue":t[6]||(t[6]=e=>s.wtEndTime.val=e)},null,544),[[i.nr,s.wtEndTime.val]])],2),s.formIsValid?(0,O.kq)("",!0):((0,O.wg)(),(0,O.iD)("p",yl,"Please, fix the above errors and submit again.")),(0,O.Wm)(r,{style:{display:"inline"}},{default:(0,O.w5)((()=>[(0,O.Uk)("Save")])),_:1}),(0,O.Wm)(r,{style:{display:"inline"},type:"button",onClick:n.cancel},{default:(0,O.w5)((()=>[(0,O.Uk)("Cancel")])),_:1},8,["onClick"])],32)}var gl={emits:["close","cancel","catchError"],data(){return{formIsValid:!0,employeeId:{isValid:!0,val:"0"},wtDate:{isValid:!0,val:""},wtStartTime:{isValid:!0,val:""},wtEndTime:{isValid:!0,val:""}}},methods:{clearValidity(e){this[e].isValid=!0},cancel(){this.$emit("cancel")},async submitData(){try{if(this.validateForm(),!this.formIsValid)return;const e={wtEmployeeId:this.employeeId.val,wtDate:this.wtDate.val,wtStartTime:this.wtStartTime.val,wtEndTime:this.wtEndTime.val};await this.$store.dispatch("workingTimes/addWorkingTime",e),this.$emit("close")}catch(e){this.$emit("cancel"),this.$emit("catchError",e)}},validateForm(){this.formIsValid=!0,"0"===this.employeeId.val&&(this.employeeId.isValid=!1,this.formIsValid=!1),""!==this.wtDate.val&&ia()(this.wtDate.val,"DD.MM.YYYY",!0).isValid()||(this.wtDate.isValid=!1,this.formIsValid=!1),this.wtStartTime.val.match(/\d+:\d+/)||(this.wtStartTime.isValid=!1,this.formIsValid=!1),this.wtEndTime.val.match(/\d+:\d+/)||(this.wtEndTime.isValid=!1,this.formIsValid=!1)}},computed:{employees(){return this.$store.getters["employees/employees"]},hasEmployees(){return this.$store.getters["employees/hasEmployees"]},selectedEmpId(){return this.selectedEmployeeId}},async created(){await this.$store.dispatch("employees/loadEmployees",{link:`${localStorage.getItem("comid")}?PageNumber=0&PageSize=10000`}),this.wtDate.val=ia()((new Date).toLocaleDateString().substring(0,10)).format("DD.MM.YYYY");const e=localStorage.getItem("comid");if(e){await this.$store.dispatch("companies/loadCompany",{id:e});const t=(0,ts.IU)(this.$store.getters["companies/company"]);this.wtStartTime.val=t.StartTime,this.wtEndTime.val=t.EndTime}const t=localStorage.getItem("empid");if(t){await this.$store.dispatch("employees/loadEmployee",{empid:t});const e=this.$store.getters["employees/employee"];this.employeeId.val=e.ID}}};const fl=(0,ae.Z)(gl,[["render",wl],["__scopeId","data-v-3cbe13c8"]]);var kl=fl,vl={components:{WorkingTimeItem:Br,WorkingTimeFilter:(0,O.RC)((()=>a.e(553).then(a.bind(a,9553)))),WorkingTimeForm:ol,AddWorkingTime:kl},data(){return{isLoading:!1,deleting:!1,editing:!1,creating:!1,wtForDel:null,wtForEdit:null,id:null,link:null,error:null,activeFilters:{pageNumber:0,pageSize:10},show:!1}},computed:{hasWorkingTimes(){return!this.isLoading&&this.$store.getters["workingTimes/hasWorkingTimes"]},addMultipleWTsLink(){const e=window.location.pathname.split("/");return`/addmultiplewt/${e[2]}${e[3]?"/"+e[3]:""}`},hasWorkingTime(){return this.$store.getters["workingTimes/hasWorkingTime"]},workingTime(){return this.$store.getters["workingTimes/workingTime"]},filteredWorkingTimes(){return this.$store.getters["workingTimes/workingTimes"]}},watch:{activeFilters(){this.loadWorkingTimes()}},methods:{async close(){this.creating=!1,await this.refresh()},catchError(e){this.error=e},create(){this.creating=!0},cancelEditing(){this.editing=!1},async closeEditor(){this.editing=!1,await this.loadWorkingTime(),await this.refresh()},deleteWT(e){this.deleting=!0,this.wtForDel=e},async editWT(e){this.editing=!0,this.wtForEdit=e,await this.loadWorkingTime()},async deleteWTnow(){try{await this.$store.dispatch("workingTimes/deleteWorkingTime",{id:this.wtForDel}),this.refresh()}catch(e){this.error=e}this.deleting=!1},cancel(){this.deleting=!1},setParams(e){this.activeFilters=e},async loadWorkingTimes(){this.isLoading=!0,localStorage.getItem("empidwt")?(this.id=localStorage.getItem("empidwt"),this.link="workingtime/fromemployee/"):localStorage.getItem("depidwt")?(this.id=localStorage.getItem("depidwt"),this.link="workingtime/fromdepartment/"):localStorage.getItem("comidwt")&&(this.id=localStorage.getItem("comidwt"),this.link="workingtime/fromcompany/");try{await this.$store.dispatch("workingTimes/loadWorkingTimes",{id:this.id,link:this.link,pageNumber:this.activeFilters.pageNumber,pageSize:this.activeFilters.pageSize}),this.show=!0}catch(e){this.error=`${e.message} in getting working times.`||"Something went wrong!"}this.isLoading=!1},async loadWorkingTime(){try{await this.$store.dispatch("workingTimes/loadWorkingTime",this.wtForEdit)}catch(e){this.error=`${e.message} in getting working time.`||"Something went wrong!"}},async refresh(){await this.loadWorkingTimes()},handleError(){this.error=null}},async created(){await this.loadWorkingTimes()}};const _l=(0,ae.Z)(vl,[["render",Mr],["__scopeId","data-v-43da221f"]]);var Dl=_l;const bl=(0,O._)("h2",null,"Page not found!",-1),El=(0,O._)("br",null,null,-1),Il=(0,O._)("br",null,null,-1);function Tl(e,t){const a=(0,O.up)("router-link"),i=(0,O.up)("base-card");return(0,O.wg)(),(0,O.iD)("div",null,[(0,O._)("section",null,[(0,O.Wm)(i,null,{default:(0,O.w5)((()=>[bl,(0,O._)("p",null,[(0,O.Uk)(" The page you requested cannot be found."),El,Il,(0,O.Uk)(" Try "),(0,O.Wm)(a,{to:"/auth"},{default:(0,O.w5)((()=>[(0,O.Uk)("logging in")])),_:1}),(0,O.Uk)(" or browsing your "),(0,O.Wm)(a,{to:"/companies"},{default:(0,O.w5)((()=>[(0,O.Uk)("current companies")])),_:1}),(0,O.Uk)(". ")])])),_:1})])])}const Cl={},Sl=(0,ae.Z)(Cl,[["render",Tl]]);var $l=Sl;const jl=(0,O._)("p",null,"You are being logged out...",-1);function Vl(e,t,a,i,o,s){const n=(0,O.up)("base-card");return(0,O.wg)(),(0,O.j4)(n,null,{default:(0,O.w5)((()=>[jl])),_:1})}var Nl={methods:{async logout(){try{this.$store.dispatch("auth/logout")}catch(e){alert(e)}}},async created(){await this.logout(),this.$router.replace("/login")}};const Al=(0,ae.Z)(Nl,[["render",Vl]]);var Wl=Al;const Ul=(0,o.p7)({history:(0,o.PO)(),routes:[{path:"/",redirect:"/about"},{path:"/addcompany",component:ma,meta:{requiresAuth:!0}},{path:"/installationmanual",component:It},{path:"/usermanual",component:ze},{path:"/adddepartment",component:Ca,meta:{requiresAuth:!0}},{path:"/addemployee",component:vi,meta:{requiresAuth:!0}},{path:"/addmultiplewt/:comid",component:go,meta:{requiresAuth:!0}},{path:"/addmultiplewt/:comid/:depid",component:go,meta:{requiresAuth:!0}},{path:"/about",component:oe},{path:"/auth",component:Xi,meta:{requiresUnauth:!0}},{path:"/calculations/:comid",component:jr,props:!0,meta:{requiresAuth:!0}},{path:"/companies",component:jo,meta:{requiresAuth:!0}},{path:"/companies/:comid",component:rs,props:!0,meta:{requiresAuth:!0}},{path:"/departments/:comid/",component:mn,props:!0,meta:{requiresAuth:!0}},{path:"/departments/:comid/:depid",component:Wn,props:!0,meta:{requiresAuth:!0}},{path:"/employees/:comid",component:Fs,props:!0,meta:{requiresAuth:!0}},{path:"/employees/:comid/:depid",component:Fs,props:!0,meta:{requiresAuth:!0}},{path:"/employeedetails/:empid",component:Zs,props:!0,meta:{requiresAuth:!0}},{path:"/generate/:comid",component:ws,props:!0,meta:{requiresAuth:!0}},{path:"/login",component:xn,meta:{requiresUnauth:!0}},{path:"/editprofile",component:_s,meta:{requiresAuth:!0}},{path:"/logout",component:Wl,meta:{requiresAuth:!0}},{path:"/register/",component:Ji,meta:{requiresUnauth:!0}},{path:"/workingtimes/:comid",component:Dl,props:!0,meta:{requiresAuth:!0}},{path:"/workingtimes/:comid/:depid",component:Dl,props:!0,meta:{requiresAuth:!0}},{path:"/:notFOund(.*)",component:$l}]});Ul.beforeEach((function(e,t,a){e.meta.requiresAuth&&!P.getters["auth/isAuthenticated"]?a("/auth"):e.meta.requiresUnauth&&P.getters["auth/isAuthenticated"]?a("/logout"):a()}));var Fl=Ul;function Ll(e,t,a,o,s,n){const r=(0,O.up)("the-header"),l=(0,O.up)("router-view");return(0,O.wg)(),(0,O.iD)(O.HY,null,[(0,O.Wm)(r),(0,O.Wm)(l,null,{default:(0,O.w5)((e=>[(0,O.Wm)(i.uT,{name:"route",mode:"out-in"},{default:(0,O.w5)((()=>[((0,O.wg)(),(0,O.j4)((0,O.LL)(e.Component)))])),_:2},1024)])),_:1})],64)}const Ml=e=>((0,O.dD)("data-v-3d5c48ec"),e=e(),(0,O.Cn)(),e),Pl=Ml((()=>(0,O._)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"},null,-1))),Ol=Ml((()=>(0,O._)("input",{id:"menu-toggle",type:"checkbox"},null,-1))),zl=Ml((()=>(0,O._)("label",{class:"menu-button-container",for:"menu-toggle"},[(0,O._)("div",{class:"menu-button"})],-1))),ql={class:"menu"},Bl={key:0},xl={key:1},Yl={key:2},Rl={key:3},Hl={key:4},Zl={key:5};function Jl(e,t,a,i,o,s){const n=(0,O.up)("router-link");return(0,O.wg)(),(0,O.iD)(O.HY,null,[Pl,(0,O._)("header",null,[(0,O._)("nav",null,[(0,O._)("h2",null,[(0,O.Wm)(n,{to:"/about"},{default:(0,O.w5)((()=>[(0,O.Uk)("Readme")])),_:1})]),Ol,zl,(0,O._)("ul",ql,[s.isLoggedIn?((0,O.wg)(),(0,O.iD)("li",Bl,[(0,O.Wm)(n,{to:"/companies"},{default:(0,O.w5)((()=>[(0,O.Uk)("All Companies")])),_:1})])):(0,O.kq)("",!0),s.hasComId&&s.isLoggedIn?((0,O.wg)(),(0,O.iD)("li",xl,[(0,O.Wm)(n,{to:s.depIdLink},{default:(0,O.w5)((()=>[(0,O.Uk)("All Departments")])),_:1},8,["to"])])):(0,O.kq)("",!0),s.hasComId&&s.isLoggedIn?((0,O.wg)(),(0,O.iD)("li",Yl,[(0,O.Wm)(n,{to:s.empIdLink},{default:(0,O.w5)((()=>[(0,O.Uk)("All Employees")])),_:1},8,["to"])])):(0,O.kq)("",!0),s.isLoggedIn?(0,O.kq)("",!0):((0,O.wg)(),(0,O.iD)("li",Rl,[(0,O.Wm)(n,{to:"/auth"},{default:(0,O.w5)((()=>[(0,O.Uk)("Login/Signup")])),_:1})])),s.isLoggedIn?((0,O.wg)(),(0,O.iD)("li",Hl,[(0,O.Wm)(n,{to:"/logout"},{default:(0,O.w5)((()=>[(0,O.Uk)("Logout")])),_:1})])):(0,O.kq)("",!0),s.isLoggedIn?((0,O.wg)(),(0,O.iD)("li",Zl,[(0,O.Wm)(n,{to:"/editprofile"},{default:(0,O.w5)((()=>[(0,O.Uk)("Edit profile")])),_:1})])):(0,O.kq)("",!0)])])])],64)}var Gl={mounted(){const e=document.getElementById("menu-toggle"),t=document.querySelectorAll(".menu li");t.forEach((t=>{t.addEventListener("click",(()=>{e.checked=!1}))}))},data(){return{comid:null}},computed:{isLoggedIn(){return this.$store.getters["auth/isAuthenticated"]},hasComId(){return this.comid},hasDepId(){return this.depid},depIdLink(){return`/departments/${this.comid}`},hasEmpId(){return this.empid},empIdLink(){return`/employees/${this.comid}`}},methods:{checkLocalStorage(){setInterval((()=>{this.comid=localStorage.getItem("comid")?localStorage.getItem("comid"):null}),200)},async logout(){await this.$store.dispatch("auth/logout"),this.$router.replace("/auth")}},created(){this.checkLocalStorage()}};const Kl=(0,ae.Z)(Gl,[["render",Jl],["__scopeId","data-v-3d5c48ec"]]);var Ql=Kl,Xl={components:{TheHeader:Ql},async created(){this.checkStorage()?await this.$store.dispatch("auth/setUserData",{id:localStorage.getItem("userId"),token:localStorage.getItem("token"),refreshToken:localStorage.getItem("refreshToken"),expiresAt:localStorage.getItem("expiresAt")}):this.clearStorageRemains()},methods:{checkStorage(){return!!localStorage.getItem("userId")&&!!localStorage.getItem("token")&&!!localStorage.getItem("refreshToken")&&!!localStorage.getItem("expiresAt")},clearStorageRemains(){localStorage.removeItem("userId"),localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),localStorage.removeItem("expiresAt")}}};const ed=(0,ae.Z)(Xl,[["render",Ll]]);var td=ed;const ad={class:"card"};function id(e,t){return(0,O.wg)(),(0,O.iD)("div",ad,[(0,O.WI)(e.$slots,"default",{},void 0,!0)])}const od={},sd=(0,ae.Z)(od,[["render",id],["__scopeId","data-v-35e76af1"]]);var nd=sd;const rd=["type"];function ld(e,t,a,i,o,s){const n=(0,O.up)("router-link");return(0,O.wg)(),(0,O.iD)("div",null,[a.link?((0,O.wg)(),(0,O.j4)(n,{key:1,to:a.to,class:(0,Tt.C_)(a.mode)},{default:(0,O.w5)((()=>[(0,O.WI)(e.$slots,"default",{},void 0,!0)])),_:3},8,["to","class"])):((0,O.wg)(),(0,O.iD)("button",{key:0,type:a.type,class:(0,Tt.C_)(a.mode)},[(0,O.WI)(e.$slots,"default",{},void 0,!0)],10,rd))])}var dd={props:{mode:{type:String,required:!1,default:null},type:{type:String,required:!1,default:"submit"},link:{type:Boolean,required:!1,default:!1},to:{type:String,required:!1,default:"/"}}};const md=(0,ae.Z)(dd,[["render",ld],["__scopeId","data-v-2dccdb9c"]]);var cd=md;const ud=e=>((0,O.dD)("data-v-eafa7164"),e=e(),(0,O.Cn)(),e),pd={class:"spinner"},hd=ud((()=>(0,O._)("div",{class:"lds-roller"},[(0,O._)("div"),(0,O._)("div"),(0,O._)("div"),(0,O._)("div"),(0,O._)("div"),(0,O._)("div"),(0,O._)("div"),(0,O._)("div")],-1))),yd=[hd];function wd(e,t){return(0,O.wg)(),(0,O.iD)("div",pd,yd)}const gd={},fd=(0,ae.Z)(gd,[["render",wd],["__scopeId","data-v-eafa7164"]]);var kd=fd;const vd={key:0,open:""},_d={key:0};function Dd(e,t,a,o,s,n){const r=(0,O.up)("base-button");return(0,O.wg)(),(0,O.j4)(O.lR,{to:"body"},[a.show?((0,O.wg)(),(0,O.iD)("div",{key:0,onClick:t[0]||(t[0]=(...e)=>n.tryClose&&n.tryClose(...e)),showClose:!0,class:"backdrop"})):(0,O.kq)("",!0),(0,O.Wm)(i.uT,{name:"dialog"},{default:(0,O.w5)((()=>[a.show?((0,O.wg)(),(0,O.iD)("dialog",vd,[(0,O._)("header",null,[(0,O.WI)(e.$slots,"header",{},(()=>[(0,O._)("h2",null,(0,Tt.zw)(a.title),1)]),!0)]),(0,O._)("section",null,[(0,O.WI)(e.$slots,"default",{},void 0,!0)]),a.fixed?(0,O.kq)("",!0):((0,O.wg)(),(0,O.iD)("menu",_d,[this.showClose?(0,O.WI)(e.$slots,"actions",{key:0},(()=>[(0,O.Wm)(r,{onClick:n.tryClose},{default:(0,O.w5)((()=>[(0,O.Uk)("Close")])),_:1},8,["onClick"])]),!0):(0,O.kq)("",!0)]))])):(0,O.kq)("",!0)])),_:3})])}var bd={props:{show:{type:Boolean,required:!0},title:{type:String,required:!1},fixed:{type:Boolean,required:!1,default:!1},showClose:{type:Boolean,required:!0}},emits:["close"],methods:{tryClose(){this.fixed||this.$emit("close")}}};const Ed=(0,ae.Z)(bd,[["render",Dd],["__scopeId","data-v-82d36630"]]);var Id=Ed;const Td=(0,i.ri)(td);Td.use(Fl),Td.use(P),Td.use(oa),Td.component("base-card",nd),Td.component("base-button",cd),Td.component("base-spinner",kd),Td.component("base-dialog",Id),Td.mount("#app")}},t={};function a(i){var o=t[i];if(void 0!==o)return o.exports;var s=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(s.exports,s,s.exports,a),s.loaded=!0,s.exports}a.m=e,function(){var e=[];a.O=function(t,i,o,s){if(!i){var n=1/0;for(m=0;m<e.length;m++){i=e[m][0],o=e[m][1],s=e[m][2];for(var r=!0,l=0;l<i.length;l++)(!1&s||n>=s)&&Object.keys(a.O).every((function(e){return a.O[e](i[l])}))?i.splice(l--,1):(r=!1,s<n&&(n=s));if(r){e.splice(m--,1);var d=o();void 0!==d&&(t=d)}}return t}s=s||0;for(var m=e.length;m>0&&e[m-1][2]>s;m--)e[m]=e[m-1];e[m]=[i,o,s]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var i in t)a.o(t,i)&&!a.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,i){return a.f[i](e,t),t}),[]))}}(),function(){a.u=function(e){return"js/"+e+"."+{161:"ab6596c5",553:"6c9a689b"}[e]+".js"}}(),function(){a.miniCssF=function(e){return"css/"+e+"."+{161:"15a4caf7",553:"16b93c60"}[e]+".css"}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="time-sheet-spa:";a.l=function(i,o,s,n){if(e[i])e[i].push(o);else{var r,l;if(void 0!==s)for(var d=document.getElementsByTagName("script"),m=0;m<d.length;m++){var c=d[m];if(c.getAttribute("src")==i||c.getAttribute("data-webpack")==t+s){r=c;break}}r||(l=!0,r=document.createElement("script"),r.charset="utf-8",r.timeout=120,a.nc&&r.setAttribute("nonce",a.nc),r.setAttribute("data-webpack",t+s),r.src=i),e[i]=[o];var u=function(t,a){r.onerror=r.onload=null,clearTimeout(p);var o=e[i];if(delete e[i],r.parentNode&&r.parentNode.removeChild(r),o&&o.forEach((function(e){return e(a)})),t)return t(a)},p=setTimeout(u.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=u.bind(null,r.onerror),r.onload=u.bind(null,r.onload),l&&document.head.appendChild(r)}}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){a.p="/"}(),function(){if("undefined"!==typeof document){var e=function(e,t,a,i,o){var s=document.createElement("link");s.rel="stylesheet",s.type="text/css";var n=function(a){if(s.onerror=s.onload=null,"load"===a.type)i();else{var n=a&&("load"===a.type?"missing":a.type),r=a&&a.target&&a.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=n,l.request=r,s.parentNode&&s.parentNode.removeChild(s),o(l)}};return s.onerror=s.onload=n,s.href=t,a?a.parentNode.insertBefore(s,a.nextSibling):document.head.appendChild(s),s},t=function(e,t){for(var a=document.getElementsByTagName("link"),i=0;i<a.length;i++){var o=a[i],s=o.getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(s===e||s===t))return o}var n=document.getElementsByTagName("style");for(i=0;i<n.length;i++){o=n[i],s=o.getAttribute("data-href");if(s===e||s===t)return o}},i=function(i){return new Promise((function(o,s){var n=a.miniCssF(i),r=a.p+n;if(t(n,r))return o();e(i,r,null,o,s)}))},o={143:0};a.f.miniCss=function(e,t){var a={161:1,553:1};o[e]?t.push(o[e]):0!==o[e]&&a[e]&&t.push(o[e]=i(e).then((function(){o[e]=0}),(function(t){throw delete o[e],t})))}}}(),function(){var e={143:0};a.f.j=function(t,i){var o=a.o(e,t)?e[t]:void 0;if(0!==o)if(o)i.push(o[2]);else{var s=new Promise((function(a,i){o=e[t]=[a,i]}));i.push(o[2]=s);var n=a.p+a.u(t),r=new Error,l=function(i){if(a.o(e,t)&&(o=e[t],0!==o&&(e[t]=void 0),o)){var s=i&&("load"===i.type?"missing":i.type),n=i&&i.target&&i.target.src;r.message="Loading chunk "+t+" failed.\n("+s+": "+n+")",r.name="ChunkLoadError",r.type=s,r.request=n,o[1](r)}};a.l(n,l,"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,i){var o,s,n=i[0],r=i[1],l=i[2],d=0;if(n.some((function(t){return 0!==e[t]}))){for(o in r)a.o(r,o)&&(a.m[o]=r[o]);if(l)var m=l(a)}for(t&&t(i);d<n.length;d++)s=n[d],a.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return a.O(m)},i=self["webpackChunktime_sheet_spa"]=self["webpackChunktime_sheet_spa"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=a.O(void 0,[998],(function(){return a(1691)}));i=a.O(i)})();
//# sourceMappingURL=app.7b3c2fcd.js.map